import{u as oe,a as ie,r as p,j as t,V as m,e as K,d as e,X as Z,aK as w,y as te,c as q,aI as X,aW as Y,aU as Se,aV as Pe,aX as ue,I as J,P as I,aY as re,aZ as ne,M as Ce,aJ as je,a_ as pe,a$ as he,a4 as me,a5 as ae,b0 as we,b1 as _e,b2 as Le,b3 as De,b4 as Ie,H as Te,ç¤¾ as ge}from"./index.b078bf5f.js";import{P as Be}from"./6420baa3.js";import{u as ke,D as de,a as ve}from"./e46f8f92.js";import{OnOffIcon as se}from"./66255e89.js";import{a as Me,b as ze}from"./eb259a23.js";import{p as Fe}from"./672ac6ee.js";import{C as Ee}from"./532dcef2.js";import{u as Oe}from"./14e817dd.js";import"./b9147315.js";const We=({isOpen:i,onClose:f})=>{oe();const k=ie(),R=["è‰²æƒ…ä½ä¿—","æ”¿æ²»æ•æ„Ÿ","æ¶‰åŠè¿æ³•","å…¶ä»–"],[D,S]=p.useState(3),[E,P]=p.useState("");if(!i)return null;const T=async()=>{if(!e.state_communitySharingPage.reportItemId)return;const B=e.state_communitySharingPage.reportItemId;try{const z=Z;if(!e.getCurrentCompany()||!z)return;const O=await w.reportBitImage(z,B,R[D],E);O.errCode===0?(te.success(k.ä¸¾æŠ¥æˆåŠŸ||"ä¸¾æŠ¥æˆåŠŸ",q.toastOptions),f()):te.error(`${k.ä¸¾æŠ¥å¤±è´¥||"ä¸¾æŠ¥å¤±è´¥"}ï¼š${O.errMsg}`,q.toastOptions)}catch{te.error(k.ä¸¾æŠ¥å¤±è´¥||"ä¸¾æŠ¥å¤±è´¥",q.toastOptions)}e.state_communitySharingPage.reportItemId=void 0,e.state_communitySharingPage.isReportModalOpen=!1,P("")},A=B=>{B.stopPropagation()};return t.jsx("div",{style:{position:"fixed",width:"100vw",height:"100vh",top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"auto"},onClick:f,children:t.jsxs(m,{type:"ä¸Šä¸‹",w:450,h:425,style:{backgroundColor:"var(--color-background-dark)",borderRadius:"8px",padding:"25px 50px",position:"relative",zIndex:1e4},onClick:A,children:[t.jsx(m,{w:18,h:18,style:{position:"absolute",right:20,top:20,cursor:"pointer",color:"#fff",fontSize:"18px",fontWeight:"bold",display:"flex",justifyContent:"center",alignItems:"center"},onClick:f,children:"Ã—"}),t.jsx(m,{type:"å·¦å³___ä¸»è½´å±…ä¸­",w:"full",h:"auto",style:{marginBottom:"15px"},children:t.jsx("div",{style:{fontSize:"20px",fontFamily:"var(--font-family-medium)",fontWeight:"bold",color:"var(--color-text-default)",marginBottom:"15px"},children:k.ä¸¾æŠ¥||"ä¸¾æŠ¥"})}),t.jsxs(m,{type:"ä¸Šä¸‹___äº¤å‰è½´å±…å·¦",h:"auto",style:{marginBottom:"15px",width:"100%"},children:[t.jsx("div",{style:{fontSize:"14px",color:"#ccc",marginBottom:"10px"},children:t.jsx(K,{type:"æ­£æ–‡å†…å®¹_é»‘åº•ç™½å­—",text:k["ä½ å¯¹å†…å®¹ä¸å–œæ¬¢çš„åŸå› æ˜¯?"]||"ä½ å¯¹å†…å®¹ä¸å–œæ¬¢çš„åŸå› æ˜¯?"})}),t.jsx(m,{w:"full",h:"auto",style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},children:R.map((B,z)=>t.jsx("div",{style:{fontFamily:"var(--font-family-regular)",width:"160px",height:"30px",backgroundColor:D===z?"var(--color-background-current)":"transparent",border:D===z?"none":"1px solid #999",borderRadius:"12px",color:D===z?"var(--color-text-current)":"var(--color-text-default)",fontSize:"12px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",marginBottom:"15px"},onClick:()=>S(z),children:k[B]||B},z))})]}),t.jsxs(m,{type:"ä¸Šä¸‹___äº¤å‰è½´å±…å·¦",w:"full",h:"auto",style:{marginBottom:"35px",width:"100%"},children:[t.jsx("div",{style:{fontSize:"14px",color:"#ccc",marginBottom:"10px"},children:t.jsx(K,{type:"æ­£æ–‡å†…å®¹_é»‘åº•ç™½å­—",text:k.è¯·è¾“å…¥ä½ çš„ä¸¾æŠ¥åŸå› ||"è¯·è¾“å…¥ä½ çš„ä¸¾æŠ¥åŸå› "})}),t.jsx("textarea",{value:E,onChange:B=>P(B.target.value),style:{width:"100%",height:"70px",backgroundColor:"var(--color-background-white)",fontFamily:"var(--font-family-regular)",color:"var(--color-text-dark)",borderRadius:"10px",border:"none",padding:"10px",resize:"none",fontSize:"14px",outline:"none"},placeholder:k["è¯·è¾“å…¥å…·ä½“åŸå› ..."]||"è¯·è¾“å…¥å…·ä½“åŸå› ..."})]}),t.jsxs(m,{h:"auto",style:{display:"flex",justifyContent:"center",gap:"68px"},children:[t.jsx(Me,{onClick:()=>{f(),e.state_communitySharingPage.reportItemId=void 0,e.state_communitySharingPage.isReportModalOpen=!1,P("")},children:k.å–æ¶ˆ||"å–æ¶ˆ"}),t.jsx(ze,{onClick:T,children:k.ç¡®å®š||"ç¡®å®š"})]})]})})},ye=()=>(oe(),t.jsx(We,{isOpen:e.state_communitySharingPage.isReportModalOpen,onClose:()=>{e.state_communitySharingPage.isReportModalOpen=!1}})),be=({placeholder:i="æœç´¢",setKeyword:f,setIsSearching:k,debounceTime:R=300})=>{oe();const D=ie(),[S,E]=p.useState(""),[P,T]=p.useState(!1),A=p.useRef(null),B=p.useRef(null);p.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]);const z=x=>{const h=x.target.value;if(E(h),A.current&&clearTimeout(A.current),h.trim()===""){k(!1);return}A.current=setTimeout(()=>{f(h),k(!0)},R)},j=x=>{x.key==="Enter"?(E(x.currentTarget.value),f(x.currentTarget.value),k(!0)):x.key==="Escape"&&(E(""),f(""),k(!1),B.current?.blur())},O=()=>{E(""),f(""),k(!1),B.current?.focus()};return t.jsxs(m,{type:"å·¦å³",style:{position:"relative",width:"274px",height:"36px",borderRadius:"12px",background:"var(--color-background)",overflow:"hidden",border:P?"1px solid var(--color-highlight)":"1px solid transparent"},children:[t.jsx("input",{ref:B,type:"text",placeholder:i||D.æœç´¢,value:S,onChange:z,onKeyDown:j,onFocus:()=>T(!0),onBlur:()=>T(!1),style:{flex:1,height:"36px",background:"transparent",border:"none",outline:"none",padding:"0 12px",fontSize:"14px",color:"var(--color-text)",justifyContent:"flex-end"}}),S&&t.jsx("button",{onClick:O,style:{background:"transparent",border:"none",cursor:"pointer",padding:"0 8px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-text-secondary)"},children:"âœ•"}),t.jsx("button",{onClick:()=>{f(S),k(!0)},style:{background:"transparent",border:"none",cursor:"pointer",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--color-text-secondary)"},children:"ğŸ”"})]})},xe=()=>{oe();const i=ie(),{buttonRefs:f,dropdownState:k,setDropdownState:R,handleDropdownSelect:D}=ke(),[S,E]=p.useState("hot"),P=e.state_communitySharingPage.totalPages,T=e.state_communitySharingPage.currentPage,[A,B]=p.useState(!1),[z,j]=p.useState(""),[O,x]=p.useState(!1),[h,n]=p.useState(0),a=e.getCurrentDevice()?.deviceType.lightLayout?.types.some(s=>s.type==="LightUserColor"),[d,g]=p.useState("keyboard_light_png"),L=["keyboard_light_png","keyboard_light_gif"],l=p.useMemo(()=>a?d:"keyboard_light_png",[a,d]),o=e.state_communitySharingPage.sharedDataList,M=e.state_communitySharingPage.pageSize;p.useEffect(()=>(e.state_communitySharingPage=e.createState_CommunitySharingPage(),()=>{e.state_communitySharingPage=e.createState_CommunitySharingPage()}),[]);const u=p.useCallback(s=>i[s]||s,[e.languageCode]);p.useEffect(()=>{e.state_communitySharingPage.currentPage=1},[S]),p.useEffect(()=>{let s=!0;const G=async U=>{const c=await ne.getAllShareImageList(),_=new Array;for(const W of U){if(!s)return[];const $=c.find(V=>V.md5===W.bit_image.md5);if($!==void 0)_.push({image:W,data:Buffer.from($.data)});else{const V=await w.downloadImageBymd5(W.bit_image.md5);if(!s)return[];if(V===void 0)continue;await ne.addShareImageToDB(V),_.push({image:W,data:Buffer.from(V.data)})}}return _},ce=async U=>{const c=Z;if(U==="new"){e.state_communitySharingPage.getListData={company:c,page:T,per_page:M,order_by_date:!0,screen_type:Y(l,e.getCurrentCompany()??"")};let _={errCode:0,data:{data:[],totle_count:0}};if(A?_=await w.searchList(e.state_communitySharingPage.getListData,z):_=await w.getList(e.state_communitySharingPage.getListData),!s)return[];if(_.errCode!==0)return[];e.state_communitySharingPage.imageShareList=_.data.data,e.state_communitySharingPage.totalPages=_.data.totle_count}if(U==="hot"){e.state_communitySharingPage.getListData={company:c,page:T,per_page:M,order_by_date:!1,screen_type:Y(l,e.getCurrentCompany()??"")};let _={errCode:0,data:{data:[],totle_count:0}};if(A?_=await w.searchList(e.state_communitySharingPage.getListData,z):_=await w.getList(e.state_communitySharingPage.getListData),!s)return[];if(_.errCode!==0)return[];e.state_communitySharingPage.imageShareList=_.data.data,e.state_communitySharingPage.totalPages=_.data.totle_count}if(U==="myShare"){e.state_communitySharingPage.getListData={company:c,page:T,per_page:M,order_by_date:!1,screen_type:Y(l,e.getCurrentCompany()??"")};let _={errCode:0,data:{data:[],totle_count:0}};if(A?_=await w.searchList(e.state_communitySharingPage.getListData,z):_=await w.getUserBitImageList(e.state_communitySharingPage.getListData),!s)return[];if(_.errCode!==0)return[];e.state_communitySharingPage.imageShareList=_.data.data,e.state_communitySharingPage.totalPages=_.data.totle_count}if(U==="myLike"){e.state_communitySharingPage.getListData={company:c,page:T,per_page:M,order_by_date:!1,screen_type:Y(l,e.getCurrentCompany()??"")};let _={errCode:0,data:{data:[],totle_count:0}};if(A?_=await w.searchList(e.state_communitySharingPage.getListData,z):_=await w.getUserLikes(e.state_communitySharingPage.getListData),!s)return[];if(_.errCode!==0)return[];e.state_communitySharingPage.imageShareList=_.data.data,e.state_communitySharingPage.totalPages=_.data.totle_count}return await G(e.state_communitySharingPage.imageShareList)};return e.supportDynamicLightEffects,ce(S).then(U=>{s&&(e.state_communitySharingPage.sharedDataList=U.filter(c=>c.image.bit_image.screen_type.includes(X.keyboard_light_png)||c.image.bit_image.screen_type.includes(X.keyboard_light_gif)))}),()=>{s=!1}},[S,T,e.getCurrentDevice()?.deviceType.id,A,z,l]),p.useEffect(()=>{e.state_communitySharingPage.sharedDataList=[],e.state_communitySharingPage.imageShareList=[]},[S,T]);const r="data:image/gif;base64,",C="data:image/png;base64,",v=p.useCallback(s=>s===X.keyboard_light_gif?r:(s===X.keyboard_light_png,C),[]),N=(()=>{const s=[{key:"thumbnail",title:i.ç¯æ•ˆ||"ç¯æ•ˆ",width:"170px",render:(U,c)=>{if(c.data===void 0)return null;let _="";const $=Buffer.from(Se.inflateRaw(c.data)).toString("utf8").split(Pe.jsonImageSourceSeparator);$.length>1?_=$[1]:_=$[0];const V=v(c.image.bit_image.screen_type)+_;return t.jsx("div",{style:{display:"flex",flexDirection:"column",fontSize:12,padding:5},children:t.jsx("img",{style:{display:"block",width:"120px",height:"57px",objectFit:"contain"},src:V})})}},{key:"name",title:i.ç¯æ•ˆåç§°||"ç¯æ•ˆåç§°",width:"1fr",render:(U,c)=>t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:c.image.bit_image.title,children:c.image.bit_image.title})},{key:"description",title:i.ç¯å…‰æè¿°||"ç¯å…‰æè¿°",width:"1fr",render:(U,c)=>t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:c.image.bit_image.description,children:c.image.bit_image.description})},{key:"author",title:i.ç”¨æˆ·åç§°||"ç”¨æˆ·åç§°",width:"1fr",render:(U,c)=>S==="myShare"?t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:e.currentUser?.name||"",children:e.currentUser?.name||""}):c.image.user_name===void 0?null:t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:c.image.user_name,children:c.image.user_name})},{key:"time",title:i.æ—¶é—´||"æ—¶é—´",width:"1fr",render:(U,c)=>{if(c.image.bit_image.create_at===void 0)return null;const _=ue(c.image.bit_image.create_at.secs_since_epoch*1e3).fromNow();return t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:_,children:_})}},{key:"downloads",title:i.ä¸‹è½½é‡||"ä¸‹è½½é‡",width:"80px",render:(U,c)=>c.image.bit_image.download_times===void 0?null:t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:c.image.bit_image.download_times?.toString()||"0"})}],G=[{key:"edit",title:i.ç¼–è¾‘||"ç¼–è¾‘",width:"80px",render:(U,c)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å®ç¼–è¾‘",onClick:async()=>{await e.handleEditLightWork(c.image.bit_image.md5)}})})},{key:"write",title:i.å†™å…¥||"å†™å…¥",width:"80px",render:(U,c)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å†™å…¥",onClick:async()=>await H(c)})})},{key:"delete",title:i.åˆ é™¤||"åˆ é™¤",width:"80px",render:(U,c)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto",position:"relative"},children:t.jsx(J,{type:"åˆ é™¤",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}await e.state_communitySharingPage.handleDeleteMyShareItem(c.image.bit_image.id)}})})}],ce=[{key:"likes",title:i.èµ||"èµ",width:"80px",render:(U,c)=>{if(c.image.like_count===void 0)return null;const _=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:c.image.like_count?.toString()||"0"}),t.jsx(se,{type:"èµ",status:S==="myLike"||c.image.my_score===1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}let W=re(c.image.my_score===null?0:c.image.my_score);S==="myLike"&&(W=1);const $=S==="myLike"||c.image.my_score===1?0:1,V=await w.evaluateImage(_,c.image.bit_image.id,$);if(V.errCode!==0){te.error(i[V.errMsg]||V.errMsg,e.toastOptions);return}const Q=[...o],le=Q.findIndex(fe=>fe.image.bit_image.id===c.image.bit_image.id);if(le===-1)return;const F=Q[le];F.image.my_score=$,S==="myLike"?(F.image.like_count--,F.image.like_count<0&&(F.image.like_count=0),Q.splice(le,1)):(W===-1&&(F.image.like_count++,F.image.dislike_count--,F.image.dislike_count<0&&(F.image.dislike_count=0)),W===0&&F.image.like_count++,W===1&&(F.image.like_count--,F.image.like_count<0&&(F.image.like_count=0))),e.state_communitySharingPage.sharedDataList=Q}})]})}},{key:"dislikes",title:i.è¸©||"è¸©",width:"80px",render:(U,c)=>{if(c.image.dislike_count===void 0)return null;const _=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:c.image.dislike_count?.toString()||"0"}),t.jsx(se,{type:"è¸©",status:c.image.my_score===-1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}const W=re(c.image.my_score===null?0:c.image.my_score),$=c.image.my_score===-1?0:-1;if((await w.evaluateImage(_,c.image.bit_image.id,$)).errCode!==0)return;const Q=[...o],le=Q.findIndex(fe=>fe.image.bit_image.id===c.image.bit_image.id);if(le===-1)return;const F=Q[le];F.image.my_score=$,S==="myLike"?Q.splice(le,1):(W===-1&&(F.image.dislike_count--,F.image.dislike_count<0&&(F.image.dislike_count=0)),W===0&&(F.image.dislike_count++,F.image.dislike_count<0&&(F.image.dislike_count=0)),W===1&&(F.image.dislike_count++,F.image.like_count--,F.image.like_count<0&&(F.image.like_count=0))),e.state_communitySharingPage.sharedDataList=Q}})]})}},{key:"write",title:i.å†™å…¥||"å†™å…¥",width:"80px",render:(U,c)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å†™å…¥",onClick:async()=>await H(c)})})},{key:"operation",title:i.æ“ä½œ||"æ“ä½œ",width:"80px",render:(U,c)=>t.jsxs(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto",position:"relative"},children:[t.jsx(J,{type:"æ“ä½œ",onClick:async()=>{const _=window.event;_&&_.stopPropagation();const W=c.image.bit_image.md5,$=f.current.get(W);if($){const V=$.getBoundingClientRect();k.isOpen&&k.itemId===W?R(Q=>({...Q,isOpen:!1})):R({isOpen:!0,position:{x:V.left-45,y:V.bottom+2},itemId:W})}}}),t.jsx("div",{ref:_=>{const W=c.image.bit_image.md5;W&&(_?f.current.set(W,_):f.current.delete(W))},style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"}})]})}];return[...s,...S==="myShare"?G:ce]})(),H=async s=>{try{let G;if(s.image.bit_image.screen_type?.toUpperCase()?.includes("PNG")?G="static":s.image.bit_image.screen_type?.toUpperCase()?.includes("GIF")&&(G="dynamic"),!G)throw new Error("å›¾ç‰‡ç±»å‹é”™è¯¯");await e.handleWriteLightEffect(G,s.data)}catch(G){I.next({type:"error",message:i.å†™å…¥å¤±è´¥||`å†™å…¥å¤±è´¥: ${G}`})}},ee=()=>{h<3&&(x(!0),n(h+1))};return t.jsx(t.Fragment,{children:t.jsxs(m,{id:"light-effect-share-page__container",type:"ä¸Šä¸‹",w:"full",h:"full",children:[t.jsx(m,{type:"å·¦å³",w:"full",style:{padding:"0 45px"},children:t.jsxs(m,{type:"å·¦å³",w:"full",h:50,style:{flex:"1 1 1386px",minWidth:0,borderBottom:"1px solid #E5E5E5",justifyContent:"space-between"},children:[t.jsx(m,{style:{gap:"32px"},children:["new","hot","myLike","myShare"].map(s=>t.jsx(m,{id:s,style:{cursor:"pointer",display:"flex",alignItems:"center",borderBottom:S===s?"2px solid var(--color-highlight)":"none"},onClick:()=>{if((s==="myShare"||s==="myLike")&&!e.currentUser){te.error(i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•",e.toastOptions);return}E(s),e.state_communitySharingPage.currentPage=1},children:t.jsx("span",{style:{color:S===s?"#74ebd5":"#989898"},children:u(s)})},s))}),t.jsxs(m,{type:"å·¦å³",style:{gap:"16px",alignItems:"center"},children:[a&&t.jsx(m,{type:"å·¦å³",style:{alignItems:"center",gap:"8px"},children:t.jsx("select",{value:d,onChange:s=>{g(s.target.value)},style:{width:"200px",height:"36px",borderRadius:"12px",border:"1px solid #ccc"},children:L.map((s,G)=>t.jsx("option",{value:s,style:{backgroundColor:"#F9F9F9",transition:"background-color 0.2s",textAlign:"center",padding:"8px 73px"},children:s==="keyboard_light_png"?i.é™æ€ç¯å…‰åˆ†äº«:i.åŠ¨æ€ç¯å…‰åˆ†äº«},G))})}),t.jsx(be,{placeholder:i.æœç´¢,setKeyword:j,setIsSearching:B,debounceTime:600})]})]})}),t.jsx(de,{columns:N,dataSource:o,pageSize:M,totalPagesFromServer:P,currentPageFromServer:T,onPageChange:s=>{e.state_communitySharingPage.currentPage=s},style:{padding:"10px 15px",flex:"1 1 auto",minWidth:1040},headerStyle:{display:"flex",alignItems:"center",justifyContent:"center"},onRetry:ee}),t.jsx(ve,{isOpen:k.isOpen,onClose:()=>R(s=>({...s,isOpen:!1})),position:k.position,onSelect:s=>D(k.itemId,s),menuItems:["download"]}),t.jsx(ye,{})]})})},Ue=()=>{oe();const i=ie(),{buttonRefs:f,dropdownState:k,setDropdownState:R,handleDropdownSelect:D}=ke(),[S,E]=p.useState("hot"),P=e.state_communitySharingPage.totalPages,T=e.state_communitySharingPage.currentPage,[A,B]=p.useState(!1),[z,j]=p.useState(""),O=e.state_communitySharingPage.sharedDataList,x=6,h=p.useCallback(l=>i[l]||l,[e.languageCode]);p.useEffect(()=>(e.state_communitySharingPage=e.createState_CommunitySharingPage(),()=>{e.state_communitySharingPage=e.createState_CommunitySharingPage()}),[]),p.useEffect(()=>{let l=!0;e.state_communitySharingPage.sharedDataList=[],e.state_communitySharingPage.imageShareList=[];const o=async u=>{const r=await ne.getAllShareImageList(),C=new Array;for(const v of u){if(!l)return[];const b=r.find(N=>N.md5===v.bit_image.md5);if(b!==void 0)C.push({image:v,data:Buffer.from(b.data)});else{const N=await w.downloadImageBymd5(v.bit_image.md5);if(!l)return[];if(N===void 0)continue;await ne.addShareImageToDB(N),C.push({image:v,data:Buffer.from(N.data)})}}return C};return(async u=>{const r=Z;if(!r)return[];const C={new:w.getList,hot:w.getList,myShare:w.getUserBitImageList,myLike:w.getUserLikes},v={new:!0,hot:!1,myShare:!1,myLike:!1};e.state_communitySharingPage.getListData={company:r,page:T,per_page:x,order_by_date:v[u],screen_type:Y("undefined",e.getCurrentCompany()??"")};let b={errCode:0,data:{data:[],totle_count:0}};return A?u==="myShare"?b=await w.searchList(e.state_communitySharingPage.getListData,z):b=await w.searchList(e.state_communitySharingPage.getListData,z):b=await C[u](e.state_communitySharingPage.getListData),l?b.errCode!==0?[]:(e.state_communitySharingPage.imageShareList=b.data.data,e.state_communitySharingPage.totalPages=b.data.totle_count,o(e.state_communitySharingPage.imageShareList)):[]})(S).then(u=>{l&&(e.state_communitySharingPage.sharedDataList=u.filter(r=>r.image.bit_image.screen_type?.toUpperCase().includes(X.PNG)||r.image.bit_image.screen_type?.toUpperCase().includes(X.GIF)),u.length===0&&(e.isWaitingShareImage=!1))}),()=>{l=!1}},[S,T,e.getCurrentDevice()?.deviceType.id,A,z]);const y=(()=>{const l=[{key:"thumbnail",title:i.å›¾ç‰‡||"å›¾ç‰‡",width:"170px",render:(u,r)=>{let C=!1;r.data===void 0&&(C=!0);let v="";try{const b=je(r.data);b===null?C=!0:v=(r.image.bit_image.screen_type.toUpperCase().includes(X.PNG)?pe:he)+Buffer.from(b).toString("base64")}catch{C=!0}return t.jsx("div",{style:{display:"flex",flexDirection:"column",fontSize:12,padding:5},children:C?t.jsx(m,{w:100,h:100,style:{display:"block",backgroundColor:"var(--color-background)",borderRadius:"6px",width:100,height:100,objectFit:"contain"}}):t.jsx("img",{style:{display:"block",width:"120px",height:"57px",objectFit:"contain"},src:v})})}},{key:"name",title:i.å›¾ç‰‡åç§°||"å›¾ç‰‡åç§°",width:"1fr",render:(u,r)=>t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:r.image.bit_image.title||"",children:r.image.bit_image.title})},{key:"description",title:i.å±å¹•æè¿°||"å±å¹•æè¿°",width:"1fr",render:(u,r)=>t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:r.image.bit_image.description,children:r.image.bit_image.description})},{key:"size",title:i.å°ºå¯¸||"å°ºå¯¸",width:"1fr",render:(u,r)=>t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:`${r.image.bit_image.width}x${r.image.bit_image.height}`,children:`${r.image.bit_image.width}x${r.image.bit_image.height}`})},{key:"author",title:i.ç”¨æˆ·åç§°||"ç”¨æˆ·åç§°",width:"1fr",render:(u,r)=>S==="myShare"?t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:e.currentUser?.name||"",children:e.currentUser?.name||""}):r.image.user_name===void 0?null:t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:r.image.user_name,children:r.image.user_name})},{key:"time",title:i.æ—¶é—´||"æ—¶é—´",width:"1fr",render:(u,r)=>{if(r.image.bit_image.create_at===void 0)return null;const C=ue(r.image.bit_image.create_at.secs_since_epoch*1e3).fromNow();return t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:C,children:C})}},{key:"downloads",title:i.ä¸‹è½½é‡||"ä¸‹è½½é‡",width:"80px",render:(u,r)=>r.image.bit_image.download_times===void 0?null:t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:r.image.bit_image.download_times?.toString()||"0"})}],o=[{key:"edit",title:i.ç¼–è¾‘||"ç¼–è¾‘",width:"80px",render:(u,r)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å®ç¼–è¾‘",onClick:async()=>{await e.handleEditScreenWork(r.image.bit_image.md5)}})})},{key:"write",title:i.å†™å…¥||"å†™å…¥",width:"80px",render:(u,r)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å†™å…¥",onClick:async()=>await L(r)})})},{key:"delete",title:i.åˆ é™¤||"åˆ é™¤",width:"80px",render:(u,r)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto",position:"relative"},children:t.jsx(J,{type:"åˆ é™¤",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}await e.state_communitySharingPage.handleDeleteMyShareItem(r.image.bit_image.id)}})})}],M=[{key:"likes",title:i.èµ,width:"80px",render:(u,r)=>{if(r.image.like_count===void 0)return null;const C=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:r.image.like_count?.toString()||"0"}),t.jsx(se,{type:"èµ",status:S==="myLike"||r.image.my_score===1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}let v=re(r.image.my_score===null?0:r.image.my_score);S==="myLike"&&(v=1);const b=S==="myLike"||r.image.my_score===1?0:1,N=await w.evaluateImage(C,r.image.bit_image.id,b);if(N.errCode!==0){te.error(i[N.errMsg]||N.errMsg,e.toastOptions);return}const H=[...O],ee=H.findIndex(G=>G.image.bit_image.id===r.image.bit_image.id);if(ee===-1)return;const s=H[ee];s.image.my_score=b,S==="myLike"?(s.image.like_count--,s.image.like_count<0&&(s.image.like_count=0),H.splice(ee,1)):(v===-1&&(s.image.like_count++,s.image.dislike_count--,s.image.dislike_count<0&&(s.image.dislike_count=0)),v===0&&s.image.like_count++,v===1&&(s.image.like_count--,s.image.like_count<0&&(s.image.like_count=0))),e.state_communitySharingPage.sharedDataList=H}})]})}},{key:"dislikes",title:i.è¸©,width:"80px",render:(u,r)=>{if(r.image.dislike_count===void 0)return null;const C=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:r.image.dislike_count?.toString()||"0"}),t.jsx(se,{type:"è¸©",status:r.image.my_score===-1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}const v=re(r.image.my_score===null?0:r.image.my_score),b=r.image.my_score===-1?0:-1;if((await w.evaluateImage(C,r.image.bit_image.id,b)).errCode!==0)return;const H=[...O],ee=H.findIndex(G=>G.image.bit_image.id===r.image.bit_image.id);if(ee===-1)return;const s=H[ee];s.image.my_score=b,S==="myLike"?H.splice(ee,1):(v===-1&&(s.image.dislike_count--,s.image.dislike_count<0&&(s.image.dislike_count=0)),v===0&&(s.image.dislike_count++,s.image.dislike_count<0&&(s.image.dislike_count=0)),v===1&&(s.image.dislike_count++,s.image.like_count--,s.image.like_count<0&&(s.image.like_count=0))),e.state_communitySharingPage.sharedDataList=H}})]})}},{key:"write",title:i.å†™å…¥,width:"80px",render:(u,r)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å†™å…¥",onClick:async()=>await L(r)})})},{key:"operation",title:i.æ“ä½œ,width:"80px",render:(u,r)=>t.jsxs(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto",position:"relative"},children:[t.jsx(J,{type:"æ“ä½œ",onClick:async()=>{const C=window.event;C&&C.stopPropagation();const v=r.image.bit_image.md5,b=f.current.get(v);if(b){const N=b.getBoundingClientRect();k.isOpen&&k.itemId===v?R(H=>({...H,isOpen:!1})):R({isOpen:!0,position:{x:N.left-45,y:N.bottom+2},itemId:v})}}}),t.jsx("div",{ref:C=>{const v=r.image.bit_image.md5;v&&(C?f.current.set(v,C):f.current.delete(v))},style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"}})]})}];return[...l,...S==="myShare"?o:M]})(),a=e.getCurrentDevice(),d=a.å±å¹•è®¾ç½®,g=e.drawingBoard;e.screenSettingsDemo,p.useEffect(()=>{a.deviceType.other?.screen&&(d.å±å¹•å°ºå¯¸.w=a.deviceType.other?.screen?.size.w,d.å±å¹•å°ºå¯¸.h=a.deviceType.other?.screen?.size.h,g.drawBoardSize.kbW=a.deviceType.other?.screen?.size.w,g.drawBoardSize.kbH=a.deviceType.other?.screen?.size.h,g.drawBoardSize.pxSize=g.drawBoardSize.pxSize=a.deviceType.other?.screen?.size.size!==void 0?a.deviceType.other?.screen?.size.size:g.drawBoardSize.kbW>200?1:2,g.drawBoardSize.memorySize=a.deviceType.other?.screen?.size.memorySize??7)},[]),p.useEffect(()=>{const l=e.toastOptions;if(e.state_screenSettingsPage.eventType==="å†™å…¥äº‹ä»¶"&&d.å†™å…¥äº‹ä»¶==="none_è°ƒç”¨ç»“æŸ"&&d.state.errMsg===""){te.success(i.å†™å…¥æˆåŠŸ,l),e.state_screenSettingsPage.eventType=null;return}e.state_screenSettingsPage.eventType==="å†™å…¥äº‹ä»¶"&&d.å†™å…¥äº‹ä»¶==="none_è°ƒç”¨ç»“æŸ"&&d.state.errMsg!==""&&(te.error(i.å†™å…¥å¤±è´¥,l),e.state_screenSettingsPage.eventType=null)},[e.state_screenSettingsPage.eventType,d.å†™å…¥äº‹ä»¶,d.state.errMsg]),p.useEffect(()=>{d.å†™å…¥äº‹ä»¶==="none_è°ƒç”¨ç»“æŸ"?(e.screenSettingsDemo.mask=!1,d.state={progress:0,errMsg:""}):e.screenSettingsDemo.mask=!0},[d.å†™å…¥äº‹ä»¶]);const L=async l=>{const o=l.image.bit_image.screen_type.toUpperCase().includes("PNG")?"PNG":"GIF";e.isWaitingShareImage=!0;const M=Buffer.from(Se.inflateRaw(l.data)),u=Buffer.from(M).toString("base64"),r=o==="PNG"?pe+u:he+u,C=new File([M],`${l.image.bit_image.id}.${o}`,{type:o==="PNG"?"image/png":"image/gif"}),v=e.getCurrentDevice();if(!v)return;const b=v.å±å¹•è®¾ç½®;let N;if(b.needUploadPic=[],o==="PNG")b.needUploadPic.push(r);else if(o==="GIF"){const H=await C.arrayBuffer();await Fe(H,(ee,s,G,ce)=>{b.needUploadPic.push(s),N===void 0&&(N=G)})}b.frameDelay=N??50,b.å±å¹•å°ºå¯¸.w=v.deviceType.other?.screen?.size.w??128,b.å±å¹•å°ºå¯¸.h=v.deviceType.other?.screen?.size.h??32,b.å±å¹•å°ºå¯¸.rgb=v.deviceType.other?.screen?.mode??"16",b.å†™å…¥äº‹ä»¶==="none_è°ƒç”¨ç»“æŸ"&&(b.å†™å…¥äº‹ä»¶="start_å¼€å§‹è°ƒç”¨",e.state_screenSettingsPage.eventType===null&&(e.state_screenSettingsPage.eventType="å†™å…¥äº‹ä»¶")),e.isWaitingShareImage=!1};return p.useEffect(()=>{e.state_communitySharingPage.sharedDataList.length>0?(e.isWaitingServerResponse=!1,e.isWaitingShareImage=!1):e.isWaitingServerResponse=e.isWaitingShareImage},[e.state_communitySharingPage.sharedDataList.length,e.isWaitingServerResponse]),t.jsxs(t.Fragment,{children:[t.jsxs(m,{id:"animation-share-page__container",type:"ä¸Šä¸‹",w:"full",h:"full",style:{},children:[t.jsx(m,{type:"å·¦å³",w:"full",style:{padding:"0 45px"},children:t.jsxs(m,{type:"å·¦å³",w:"full",h:50,style:{flex:"1 1 1386px",minWidth:0,borderBottom:"1px solid #E5E5E5",justifyContent:"space-between"},children:[t.jsx(m,{style:{gap:"32px"},children:["new","hot","myLike","myShare"].map(l=>t.jsx(m,{id:l,style:{cursor:"pointer",display:"flex",alignItems:"center",borderBottom:S===l?"2px solid var(--color-highlight)":"none"},onClick:()=>{if((l==="myShare"||l==="myLike")&&!e.currentUser){te.error(i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•",e.toastOptions);return}E(l),e.state_communitySharingPage.currentPage=1},children:t.jsx("span",{style:{color:S===l?"#74ebd5":"#989898"},children:h(l)})},l))}),t.jsx(be,{placeholder:i.æœç´¢,setKeyword:j,setIsSearching:B,debounceTime:600})]})}),t.jsx(de,{columns:y,dataSource:O,pageSize:x,totalPagesFromServer:P,currentPageFromServer:T,onPageChange:l=>{e.state_communitySharingPage.currentPage=l},style:{padding:"10px 15px",flex:"1 1 auto",minWidth:1040},headerStyle:{display:"flex",alignItems:"center",justifyContent:"center"}}),t.jsx(ve,{isOpen:k.isOpen,onClose:()=>R(l=>({...l,isOpen:!1})),position:k.position,onSelect:l=>D(k.itemId,l),menuItems:["download","report"]}),t.jsx(ye,{})]}),e.screenSettingsDemo.mask&&t.jsxs(m,{type:"ä¸Šä¸‹",w:"full",h:"full",style:{position:"absolute",background:"#0003",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",color:"#fff",gap:"1vh",zIndex:1e3},children:[t.jsx(Ee,{progress:Math.floor(d.state.progress*100),size:100,color:"#74EBD5"}),t.jsxs(m,{type:"ä¸Šä¸‹",style:{gap:"1vh"},children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹_é»‘åº•ç™½å­—",text:i.è¯·ç¨å€™}),t.jsx(K,{type:"æ­£æ–‡å†…å®¹_é»‘åº•ç™½å­—",text:`${Math.floor(d.state.progress*100)}%`})]})]}),e.isWaitingShareImage&&t.jsxs(m,{type:"ä¸Šä¸‹",w:"full",h:"full",style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",justifyContent:"center",alignItems:"center",gap:12,zIndex:1e3,borderRadius:"12px"},children:[t.jsx(Ce,{}),t.jsx(K,{type:"å°æ ‡é¢˜",text:i.è¯·ç¨å€™||"è¯·ç¨å€™"})]})]})},Re=()=>{oe();const i=ie();Oe();const[f,k]=p.useState("hot"),R=e.state_communitySharingPage.totalPages,D=e.state_communitySharingPage.currentPage,S=e.state_communitySharingPage.imageShareList,E=e.state_communitySharingPage.sharedDataList,P=10,T=p.useCallback(x=>{switch(x){case"new":return i.æœ€æ–°||"æœ€æ–°";case"hot":return i.æœ€çƒ­||"æœ€çƒ­";case"like":return i.æˆ‘çš„ç‚¹èµ||"æˆ‘çš„ç‚¹èµ";case"arts":return i.æˆ‘çš„åˆ†äº«||"æˆ‘çš„åˆ†äº«"}},[e.languageCode]);p.useEffect(()=>(e.state_communitySharingPage=e.createState_CommunitySharingPage(),()=>{e.state_communitySharingPage=e.createState_CommunitySharingPage()}),[]),p.useEffect(()=>{let x=!0;const h=e.getCurrentDevice().deviceType.type==="mouse"?X.config_mouse:X.config,n=async a=>{const d=await ne.getAllShareImageList(),g=new Array;for(const L of a){if(!x)return[];const l=d.find(o=>o.md5===L.bit_image.md5);if(l!==void 0)g.push({image:L,data:Buffer.from(l.data)});else{const o=await w.downloadImageBymd5(L.bit_image.md5);if(!x)return[];if(o===void 0)continue;await ne.addShareImageToDB(o),g.push({image:L,data:Buffer.from(o.data)})}}return g};return(async a=>{const d=Z;if(!d)return[];if(a==="new"){e.state_communitySharingPage.getListData={company:d,page:D,per_page:P,order_by_date:!0,screen_type:Y(h,e.getCurrentCompany()??"")};let g={errCode:0,data:{data:[],totle_count:0}};if(g=await w.getList(e.state_communitySharingPage.getListData),!x)return[];if(g.errCode!==0)return[];e.state_communitySharingPage.imageShareList=g.data.data,e.state_communitySharingPage.totalPages=g.data.totle_count}if(a==="hot"){e.state_communitySharingPage.getListData={company:d,page:D,per_page:P,order_by_date:!1,screen_type:Y(h,e.getCurrentCompany()??"")};let g={errCode:0,data:{data:[],totle_count:0}};if(g=await w.getList(e.state_communitySharingPage.getListData),!x)return[];if(g.errCode!==0)return[];e.state_communitySharingPage.imageShareList=g.data.data,e.state_communitySharingPage.totalPages=g.data.totle_count}if(a==="like"){e.state_communitySharingPage.getListData={company:d,page:D,per_page:P,order_by_date:!1,screen_type:Y(h,e.getCurrentCompany()??"")};let g={errCode:0,data:{data:[],totle_count:0}};if(g=await w.getUserLikes(e.state_communitySharingPage.getListData),!x)return[];if(g.errCode!==0)return[];e.state_communitySharingPage.imageShareList=g.data.data,e.state_communitySharingPage.totalPages=g.data.totle_count}if(a==="arts"){e.state_communitySharingPage.getListData={company:d,page:D,per_page:P,order_by_date:!1,screen_type:Y(h,e.getCurrentCompany()??"")};let g={errCode:0,data:{data:[],totle_count:0}};if(g=await w.getUserBitImageList(e.state_communitySharingPage.getListData),!x)return[];if(g.errCode!==0)return[];e.state_communitySharingPage.imageShareList=g.data.data,e.state_communitySharingPage.totalPages=g.data.totle_count}return n(e.state_communitySharingPage.imageShareList)})(f).then(async a=>{x&&(e.state_communitySharingPage.sharedDataList=a.filter(d=>d.image.bit_image.screen_type.includes(h)))}),()=>{x=!1}},[f,D,e.getCurrentDevice()?.deviceType.id]),p.useEffect(()=>{e.state_communitySharingPage.sharedDataList=[],e.state_communitySharingPage.imageShareList=[]},[f,D]);const A=p.useMemo(()=>{if(e.state_communitySharingPage.sharedDataList.length===0)return[];const x=[{key:"fileName",title:i.æ–‡ä»¶åç§°||"æ–‡ä»¶åç§°",width:"170px",render:(y,a)=>a.data===void 0?null:t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:a.image.bit_image.title,children:a.image.bit_image.title})},{key:"æ–‡ä»¶æè¿°",title:i.æ–‡ä»¶æè¿°||"æ–‡ä»¶æè¿°",width:"1fr",render:(y,a)=>t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:a.image.bit_image.description,children:a.image.bit_image.description})},{key:"author",title:i.ç”¨æˆ·åç§°||"ç”¨æˆ·åç§°",width:"1fr",render:(y,a)=>f==="arts"?t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:e.currentUser?.name||"",children:e.currentUser?.name||""}):a.image.user_name===void 0?null:t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:a.image.user_name,children:a.image.user_name})},{key:"time",title:i.æ—¶é—´||"æ—¶é—´",width:"1fr",render:(y,a)=>{if(a.image.bit_image.create_at===void 0)return null;const d=ue(a.image.bit_image.create_at.secs_since_epoch*1e3).fromNow();return t.jsx("div",{style:{fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:d,children:d})}},{key:"downloads",title:i.ä¸‹è½½é‡||"ä¸‹è½½é‡",width:"80px",render:(y,a)=>a.image.bit_image.download_times===void 0?null:t.jsx("div",{style:{fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:a.image.bit_image.download_times?.toString()||"0",children:a.image.bit_image.download_times?.toString()||"0"})}],h=[{key:"delete",title:i.åˆ é™¤||"åˆ é™¤",width:"80px",render:(y,a)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"åˆ é™¤",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}await e.state_communitySharingPage.handleDeleteMyShareItem(a.image.bit_image.id)}})})}],n=[{key:"likes",title:i.èµ||"èµ",width:"80px",render:(y,a)=>{if(a.image.like_count===void 0)return null;const d=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:a.image.like_count?.toString()||"0"}),t.jsx(se,{type:"èµ",status:f==="like"||a.image.my_score===1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}let g=re(a.image.my_score===null?0:a.image.my_score);f==="like"&&(g=1);const L=f==="like"||a.image.my_score===1?0:1,l=await w.evaluateImage(d,a.image.bit_image.id,L);if(l.errCode!==0){te.error(i[l.errMsg]||l.errMsg,e.toastOptions);return}const o=[...E],M=o.findIndex(r=>r.image.bit_image.id===a.image.bit_image.id);if(M===-1)return;const u=o[M];u.image.my_score=L,f==="like"?(u.image.like_count--,u.image.like_count<0&&(u.image.like_count=0),o.splice(M,1)):(g===-1&&(u.image.like_count++,u.image.dislike_count--,u.image.dislike_count<0&&(u.image.dislike_count=0)),g===0&&u.image.like_count++,g===1&&(u.image.like_count--,u.image.like_count<0&&(u.image.like_count=0))),e.state_communitySharingPage.sharedDataList=o}})]})}},{key:"dislikes",title:i.è¸©||"è¸©",width:"80px",render:(y,a)=>{if(a.image.dislike_count===void 0)return null;const d=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:a.image.dislike_count?.toString()||"0"}),t.jsx(se,{type:"è¸©",status:a.image.my_score===-1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}const g=re(a.image.my_score===null?0:a.image.my_score),L=a.image.my_score===-1?0:-1;if((await w.evaluateImage(d,a.image.bit_image.id,L)).errCode!==0)return;const o=[...E],M=o.findIndex(r=>r.image.bit_image.id===a.image.bit_image.id);if(M===-1)return;const u=o[M];u.image.my_score=L,f==="like"?o.splice(M,1):(g===-1&&(u.image.dislike_count--,u.image.dislike_count<0&&(u.image.dislike_count=0)),g===0&&(u.image.dislike_count++,u.image.dislike_count<0&&(u.image.dislike_count=0)),g===1&&(u.image.dislike_count++,u.image.like_count--,u.image.like_count<0&&(u.image.like_count=0))),e.state_communitySharingPage.sharedDataList=o}})]})}},{key:"download",title:i.ä¸‹è½½||"ä¸‹è½½",width:"80px",render:(y,a)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å†™å…¥",onClick:()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}z(a)}})})}];return[...x,...f==="arts"?h:n]},[e.state_communitySharingPage.sharedDataList,f,i,S]),B=q.getCurrentDevice()?.å±å¹•è®¾ç½®;p.useEffect(()=>{B.å†™å…¥äº‹ä»¶==="none_è°ƒç”¨ç»“æŸ"?(q.screenSettingsDemo.mask=!1,B.state={progress:0,errMsg:""}):q.screenSettingsDemo.mask=!0},[B.å†™å…¥äº‹ä»¶]);const z=async x=>{const h=ie(),n=x.image.bit_image.md5,y=e.state_communitySharingPage.sharedDataList;if(y.length===0){I.next({type:"error",message:h.ä¸‹è½½å¤±è´¥||"ä¸‹è½½å¤±è´¥"});return}await me.getAllItems(ae.DBPATH.CONFIG_NEW,ae.DBPATH.CONFIG_NEW_BUFFER);const a=y.find(o=>o.image.bit_image.md5===n),d=y.findIndex(o=>o.image.bit_image.md5===n);if(a===void 0){I.next({type:"error",message:h.ä¸‹è½½å¤±è´¥||"ä¸‹è½½å¤±è´¥"});return}const g=await w.addBitImageDownloadTime(a?.image.bit_image.id);if(g.errCode!==0){I.next({type:"error",message:h.ä¸‹è½½å¤±è´¥+": "+(g.errMsg||"æœªçŸ¥é”™è¯¯")});return}const L=[...y];L[d].image.bit_image.download_times+=1,e.state_communitySharingPage.sharedDataList=L;const l={id:we(),title:a.image.bit_image.title,describe:a.image.bit_image.description,screen_type:a.image.bit_image.screen_type,create_at:a.image.bit_image.create_at.secs_since_epoch,company:a.image.bit_image.company,data:a.data,width:a.image.bit_image.width,height:a.image.bit_image.height};await me.saveItemToDb(l,ae.DBPATH.CONFIG_NEW,ae.DBPATH.CONFIG_NEW_BUFFER)?(I.next({type:"success",message:h.ä¸‹è½½æˆåŠŸ||"ä¸‹è½½æˆåŠŸ"}),l.data):I.next({type:"error",message:h.ä¸‹è½½å¤±è´¥||"ä¸‹è½½å¤±è´¥"})},[j,O]=p.useState(!1);return p.useEffect(()=>{O(B.å†™å…¥äº‹ä»¶!=="none_è°ƒç”¨ç»“æŸ")},[B.å†™å…¥äº‹ä»¶]),t.jsx(t.Fragment,{children:t.jsxs(m,{id:"animation-share-page__container",type:"ä¸Šä¸‹",w:"full",h:"full",style:{},children:[t.jsx(m,{type:"å·¦å³",w:"full",style:{padding:"0 45px"},children:t.jsx(m,{type:"å·¦å³",w:"full",h:50,style:{flex:"1 1 1386px",minWidth:0,borderBottom:"1px solid #E5E5E5",justifyContent:"space-between"},children:t.jsx(m,{style:{gap:"32px"},children:["new","hot","like","arts"].map(x=>t.jsx(m,{id:x,style:{cursor:"pointer",display:"flex",alignItems:"center",borderBottom:f===x?"2px solid var(--color-highlight)":"none"},onClick:()=>{if((x==="like"||x==="arts")&&!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}k(x),e.state_communitySharingPage.currentPage=1},children:t.jsx("span",{style:{color:f===x?"#74ebd5":"#989898"},children:T(x)})},x))})})}),t.jsx(de,{columns:A,dataSource:e.state_communitySharingPage.sharedDataList,pageSize:P,totalPagesFromServer:R,currentPageFromServer:D,onPageChange:x=>{e.state_communitySharingPage.currentPage=x},style:{padding:"10px 15px",flex:"1 1 auto",minWidth:1040},headerStyle:{display:"flex",alignItems:"center",justifyContent:"center"}}),t.jsx(ye,{})]})})},Ae=()=>{oe();const i=ie(),[f,k]=p.useState("hot"),R=e.state_communitySharingPage.totalPages,D=e.state_communitySharingPage.currentPage,S=e.state_communitySharingPage.imageShareList,E=e.state_communitySharingPage.sharedDataList,P=10,T=p.useCallback(j=>{switch(j){case"new":return i.æœ€æ–°||"æœ€æ–°";case"hot":return i.æœ€çƒ­||"æœ€çƒ­";case"like":return i.æˆ‘çš„ç‚¹èµ||"æˆ‘çš„ç‚¹èµ";case"arts":return i.æˆ‘çš„åˆ†äº«||"æˆ‘çš„åˆ†äº«"}},[e.languageCode]);p.useEffect(()=>(e.state_communitySharingPage=e.createState_CommunitySharingPage(),()=>{e.state_communitySharingPage=e.createState_CommunitySharingPage()}),[]),p.useEffect(()=>{let j=!0;const O=async h=>{const n=await ne.getAllShareImageList();if(n===void 0||n.length===0)return[];const y=new Array;for(const a of h){const d=n.find(g=>g.md5===a.bit_image.md5);if(d!==void 0)y.push({image:a,data:Buffer.from(d.data)});else{const g=await w.downloadImageBymd5(a.bit_image.md5);if(g===void 0)continue;await ne.addShareImageToDB(g),y.push({image:a,data:Buffer.from(g.data)})}}return y};return(async h=>{const n=Z;if(!n)return[];if(h==="new"){e.state_communitySharingPage.getListData={company:n,page:D,per_page:10,order_by_date:!0,screen_type:Y(X.macro,e.getCurrentCompany()??"")};let y={errCode:0,data:{data:[],totle_count:0}};if(y=await w.getList(e.state_communitySharingPage.getListData),y.errCode!==0)return[];if(!j)return[];e.state_communitySharingPage.imageShareList=y.data.data,e.state_communitySharingPage.totalPages=y.data.totle_count}if(h==="hot"){e.state_communitySharingPage.getListData={company:n,page:D,per_page:P,order_by_date:!1,screen_type:Y(X.macro,e.getCurrentCompany()??"")};let y={errCode:0,data:{data:[],totle_count:0}};if(y=await w.getList(e.state_communitySharingPage.getListData),y.errCode!==0)return[];if(!j)return[];e.state_communitySharingPage.imageShareList=y.data.data,e.state_communitySharingPage.totalPages=y.data.totle_count}if(h==="like"){e.state_communitySharingPage.getListData={company:n,page:D,per_page:P,order_by_date:!1,screen_type:Y(X.macro,e.getCurrentCompany()??"")};let y={errCode:0,data:{data:[],totle_count:0}};if(y=await w.getUserLikes(e.state_communitySharingPage.getListData),y.errCode!==0)return[];if(!j)return[];e.state_communitySharingPage.imageShareList=y.data.data,e.state_communitySharingPage.totalPages=y.data.totle_count}if(h==="arts"){e.state_communitySharingPage.getListData={company:n,page:D,per_page:P,order_by_date:!1,screen_type:Y(X.macro,e.getCurrentCompany()??"")};let y={errCode:0,data:{data:[],totle_count:0}};if(y=await w.getUserBitImageList(e.state_communitySharingPage.getListData),y.errCode!==0)return[];if(!j)return[];e.state_communitySharingPage.imageShareList=y.data.data,e.state_communitySharingPage.totalPages=y.data.totle_count}return O(e.state_communitySharingPage.imageShareList)})(f).then(async h=>{j&&(e.state_communitySharingPage.sharedDataList=h.filter(n=>n.image.bit_image.screen_type.includes(X.macro)))}),()=>{j=!1}},[f,D,e.getCurrentDevice()?.deviceType.id]),p.useEffect(()=>{e.state_communitySharingPage.sharedDataList=[],e.state_communitySharingPage.imageShareList=[]},[f,D]);const A=p.useMemo(()=>{if(E.length===0)return[];const j=[{key:"fileName",title:i.æ–‡ä»¶åç§°||"æ–‡ä»¶åç§°",width:"170px",render:(h,n)=>n.data===void 0?null:t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:n.image.bit_image.title,children:n.image.bit_image.title})},{key:"æ–‡ä»¶æè¿°",title:i.æ–‡ä»¶æè¿°,width:"1fr",render:(h,n)=>t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:n.image.bit_image.description,children:n.image.bit_image.description})},{key:"author",title:i.ç”¨æˆ·åç§°,width:"1fr",render:(h,n)=>f==="arts"?t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:e.currentUser?.name||"",children:e.currentUser?.name||""}):n.image.user_name===void 0?null:t.jsx("div",{style:{width:"88px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:n.image.user_name,children:n.image.user_name})},{key:"time",title:i.æ—¶é—´,width:"1fr",render:(h,n)=>{if(n.image.bit_image.create_at===void 0)return null;const y=ue(n.image.bit_image.create_at.secs_since_epoch*1e3).fromNow();return t.jsx("div",{style:{fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:y,children:y})}},{key:"downloads",title:i.ä¸‹è½½é‡,width:"80px",render:(h,n)=>n.image.bit_image.download_times===void 0?null:t.jsx("div",{style:{fontSize:16,fontWeight:400,color:"var(--color-text-dark)",fontFamily:"var(--font-family-regular)"},title:n.image.bit_image.download_times?.toString(),children:n.image.bit_image.download_times?.toString()})}],O=[{key:"delete",title:i.åˆ é™¤,width:"80px",render:(h,n)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"åˆ é™¤",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}await e.state_communitySharingPage.handleDeleteMyShareItem(n.image.bit_image.id)}})})}],x=[{key:"likes",title:i.èµ,width:"80px",render:(h,n)=>{if(n.image.like_count===void 0)return null;const y=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:n.image.like_count?.toString()||"0"}),t.jsx(se,{type:"èµ",status:f==="like"||n.image.my_score===1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}let a=re(n.image.my_score===null?0:n.image.my_score);f==="like"&&(a=1);const d=f==="like"||n.image.my_score===1?0:1,g=await w.evaluateImage(y,n.image.bit_image.id,d);if(g.errCode!==0){toast.error(i[g.errMsg]||g.errMsg,e.toastOptions);return}const L=[...E],l=L.findIndex(M=>M.image.bit_image.id===n.image.bit_image.id);if(l===-1)return;const o=L[l];o.image.my_score=d,f==="like"?(o.image.like_count--,o.image.like_count<0&&(o.image.like_count=0),L.splice(l,1)):(a===-1&&(o.image.like_count++,o.image.dislike_count--,o.image.dislike_count<0&&(o.image.dislike_count=0)),a===0&&o.image.like_count++,a===1&&(o.image.like_count--,o.image.like_count<0&&(o.image.like_count=0))),e.state_communitySharingPage.sharedDataList=L}})]})}},{key:"dislikes",title:i.è¸©,width:"80px",render:(h,n)=>{if(n.image.dislike_count===void 0)return null;const y=Z;return t.jsxs(m,{type:"å·¦å³",w:"full",h:"full",children:[t.jsx(K,{type:"æ­£æ–‡å†…å®¹",text:n.image.dislike_count?.toString()||"0"}),t.jsx(se,{type:"è¸©",status:n.image.my_score===-1?"on":"off",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}const a=re(n.image.my_score===null?0:n.image.my_score),d=n.image.my_score===-1?0:-1;if((await w.evaluateImage(y,n.image.bit_image.id,d)).errCode!==0)return;const L=[...E],l=L.findIndex(M=>M.image.bit_image.id===n.image.bit_image.id);if(l===-1)return;const o=L[l];o.image.my_score=d,f==="like"?L.splice(l,1):(a===-1&&(o.image.dislike_count--,o.image.dislike_count<0&&(o.image.dislike_count=0)),a===0&&(o.image.dislike_count++,o.image.dislike_count<0&&(o.image.dislike_count=0)),a===1&&(o.image.dislike_count++,o.image.like_count--,o.image.like_count<0&&(o.image.like_count=0))),e.state_communitySharingPage.sharedDataList=L}})]})}},{key:"download",title:i.ä¸‹è½½,width:"80px",render:(h,n)=>t.jsx(m,{w:30,h:30,style:{cursor:"pointer",margin:"0 auto"},children:t.jsx(J,{type:"å†™å…¥",onClick:async()=>{if(!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}await z(n)}})})}];return[...j,...f==="arts"?O:x]},[E,E.length,f,i,S,S.length,D,R]),B=q.getCurrentDevice()?.å±å¹•è®¾ç½®;p.useEffect(()=>{B.å†™å…¥äº‹ä»¶==="none_è°ƒç”¨ç»“æŸ"?(q.screenSettingsDemo.mask=!1,B.state={progress:0,errMsg:""}):q.screenSettingsDemo.mask=!0},[B.å†™å…¥äº‹ä»¶]);const z=async j=>{const O=ie(),x=j.image.bit_image.md5,h=e.state_communitySharingPage.sharedDataList;if(h.length===0){I.next({type:"error",message:O.æ²¡æœ‰æ‰¾åˆ°æ•°æ®||"æ²¡æœ‰æ‰¾åˆ°æ•°æ®"});return}await me.getAllItems(ae.DBPATH.MACRO,ae.DBPATH.MACRO_BUFFER);const n=h.find(r=>r.image.bit_image.md5===x),y=h.findIndex(r=>r.image.bit_image.md5===x);if(n===void 0){I.next({type:"error",message:O.æ²¡æœ‰æ‰¾åˆ°æ•°æ®||"æ²¡æœ‰æ‰¾åˆ°æ•°æ®"});return}const a=n?.data,d=_e.decodeBuffer(a);if(d===void 0){I.next({type:"error",message:O.ä¸‹è½½å¤±è´¥||"ä¸‹è½½å¤±è´¥"});return}const g=await w.addBitImageDownloadTime(n?.image.bit_image.id);if(g.errCode!==0){I.next({type:"error",message:O.ä¸‹è½½å¤±è´¥+": "+(g.errMsg||"æœªçŸ¥é”™è¯¯")});return}const L=[...h];L[y].image.bit_image.download_times+=1,e.state_communitySharingPage.sharedDataList=L;let l;const o=we();if(d instanceof Le||d.hasOwnProperty("localId")||"localId"in d){const r=d,C=r.value;l={id:o,name:r.name||"",delay:1,loopTime:C.repeatCount||1,event:De(C.macro),type:Ie[C.macroType||"repeat_times"]}}else l={...d,id:o};const M=_e.encodeBuffer(l);if(M.length===0){I.next({type:"error",message:O.ä¸‹è½½å¤±è´¥||"ä¸‹è½½å¤±è´¥"});return}const u={id:o,title:n.image.bit_image.title,describe:n.image.bit_image.description,screen_type:n.image.bit_image.screen_type,create_at:n.image.bit_image.create_at.secs_since_epoch,company:n.image.bit_image.company,data:M,width:n.image.bit_image.width,height:n.image.bit_image.height};await me.saveItemToDb(u,ae.DBPATH.MACRO,ae.DBPATH.MACRO_BUFFER)&&I.next({type:"success",message:O["ä¸‹è½½æˆåŠŸï¼Œè¯·è¿”å›å®ç¼–è¾‘é¡µæŸ¥çœ‹"]||"ä¸‹è½½æˆåŠŸï¼Œè¯·è¿”å›å®ç¼–è¾‘é¡µæŸ¥çœ‹"})};return t.jsx(t.Fragment,{children:t.jsxs(m,{id:"animation-share-page__container",type:"ä¸Šä¸‹",w:"full",h:"full",children:[t.jsx(m,{type:"å·¦å³",w:"full",style:{padding:"0 45px"},children:t.jsx(m,{type:"å·¦å³",w:"full",h:50,style:{flex:"1 1 1386px",minWidth:0,borderBottom:"1px solid #E5E5E5",justifyContent:"space-between"},children:t.jsx(m,{style:{gap:"32px"},children:["new","hot","like","arts"].map(j=>t.jsx(m,{id:j,style:{cursor:"pointer",display:"flex",alignItems:"center",borderBottom:f===j?"2px solid var(--color-highlight)":"none"},onClick:()=>{if((j==="like"||j==="arts")&&!e.currentUser){I.next({type:"error",message:i.è¯·ç™»é™†åå†å°è¯•||"è¯·ç™»é™†åå†å°è¯•"});return}k(j),e.state_communitySharingPage.currentPage=1},children:t.jsx("span",{style:{color:f===j?"#74ebd5":"#989898"},children:T(j)})},j))})})}),t.jsx(de,{columns:A,dataSource:e.state_communitySharingPage.sharedDataList,pageSize:P,totalPagesFromServer:R,currentPageFromServer:D,onPageChange:j=>{e.state_communitySharingPage.currentPage=j},style:{padding:"10px 15px",flex:"1 1 auto",minWidth:1040},headerStyle:{display:"flex",alignItems:"center",justifyContent:"center"}})]})})},Ze=()=>{oe();const i=ie(),f=e.currentDevice.deviceType.type,[k,R]=p.useState("é…ç½®åˆ†äº«"),D=e.supportStaticLightEffects;p.useLayoutEffect(()=>{R((()=>q.currentç¤¾åŒºåˆ†äº«SubpageIndex===ge.å®åˆ†äº«?"å®åˆ†äº«":e.currentDevice?.deviceType?.lightLayout&&D?"ç¯æ•ˆåˆ†äº«":e.currentDevice?.deviceType?.other?.screen?(e.getCurrentDevice().deviceType.type=="dongle"&&(e.currentç¤¾åŒºåˆ†äº«SubpageIndex=ge.åŠ¨ç”»åˆ†äº«),"åŠ¨ç”»åˆ†äº«"):f=="mouse"?"å®åˆ†äº«":"é…ç½®åˆ†äº«")())},[]);const S=p.useMemo(()=>{let P=[];return f!="dongle"&&(P=[{key:"é…ç½®åˆ†äº«",title:i.é…ç½®åˆ†äº«},{key:"å®åˆ†äº«",title:i.å®åˆ†äº«}]),(e.currentDevice?.deviceType?.other?.screen||e.debug)&&P.unshift({key:"åŠ¨ç”»åˆ†äº«",title:i.åŠ¨ç”»åˆ†äº«}),(e.currentDevice?.deviceType?.lightLayout&&D||e.debug)&&P.unshift({key:"ç¯æ•ˆåˆ†äº«",title:i.ç¯æ•ˆåˆ†äº«}),P},[e.languageCode,e.currentDevice?.deviceType?.id]),E=()=>{switch(k){case"ç¯æ•ˆåˆ†äº«":return t.jsx(xe,{});case"åŠ¨ç”»åˆ†äº«":return t.jsx(Ue,{});case"é…ç½®åˆ†äº«":return t.jsx(Re,{});case"å®åˆ†äº«":return t.jsx(Ae,{});default:return t.jsx(xe,{})}};return t.jsx(Be,{overflow:"hidden",tabs:S.map((P,T)=>({...P,key:T})),currentTab:S.findIndex(P=>P.key===k),onTabChange:P=>{const T=S[P].key;R(T),f=="keyboard"&&(q.currentHomePageIndex=Te.ç¤¾åŒºåˆ†äº«),q.currentç¤¾åŒºåˆ†äº«SubpageIndex=T==="ç¯æ•ˆåˆ†äº«"?ge.ç¯æ•ˆåˆ†äº«:T==="åŠ¨ç”»åˆ†äº«"?ge.åŠ¨ç”»åˆ†äº«:T==="é…ç½®åˆ†äº«"?ge.é…ç½®åˆ†äº«:ge.å®åˆ†äº«,e.state_communitySharingPage=e.createState_CommunitySharingPage()},children:E()})};export{Ze as Page_ç¤¾åŒºåˆ†äº«};
