import{J as v}from"./index.b078bf5f.js";const y=(u,D)=>new Promise((x,p)=>{const t=document.createElement("canvas"),e=t.getContext("2d");if(!e){p(new Error("Failed to create canvas context"));return}const d=new v(new Uint8Array(u)),o=d.numFrames();t.width=d.width,t.height=d.height;let r=e.createImageData(t.width,t.height),h=e.createImageData(t.width,t.height);const m=n=>{const i=[];d.decodeAndBlitFrameRGBA(n,i);const{x:g,y:f,width:l,height:w,disposal:I,delay:R}=d.frameInfo(n);for(let s=0;s<w;s++)for(let c=0;c<l;c++){const a=4*(g+f*t.width)+4*(c+s*t.width);i[a+3]&&(r.data[a+0]=i[a+0],r.data[a+1]=i[a+1],r.data[a+2]=i[a+2],r.data[a+3]=i[a+3])}e.clearRect(0,0,t.width,t.height),e.putImageData(r,0,0);const F=t.toDataURL();switch(I){case 2:e.clearRect(g,f,l,w),r=e.getImageData(0,0,t.width,t.height);break;case 3:r=e.createImageData(t.width,t.height),r.data.set(h.data);break;default:h=e.getImageData(0,0,t.width,t.height);break}D(n,F,R*10,o),n<o-1?setTimeout(()=>{m(n+1)}):x()};m(0)});export{y as p};
