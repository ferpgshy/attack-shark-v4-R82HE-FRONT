import{ai as s,al as d,N as v,am as f}from"./index.b078bf5f.js";import{CommonMsPan1080 as h}from"./c5a66cc9.js";class u extends h{getUSBVersion=async()=>{const e=await this.commonMsg(new Uint8Array([173]),s.Bit7);if(e!==void 0)return e[2]<<8|e[1]};getRFVersion=async()=>{const e=await this.commonMsg(new Uint8Array([128]),s.Bit7);if(e!==void 0)return e[2]<<8|e[1]};mledUpgrade=async(e,t)=>!1;oledUpgrade=async(e,t)=>!1;flashUpgrade=async(e,t)=>!1;BOOT_INFOS=[{vid:12625,pid:16427}];boot_usb=async()=>{if(this.BOOT_INFOS.some(i=>i.vid===this.deviceType.vid&&i.pid===this.deviceType.pid))return this.deviceType.devAddr.toString();await this.sendMsg(new Uint8Array([127,85,170,85,170]),s.Bit7),await d(1e3*1);let e=0,t;for(;t===void 0&&e<100;)await d(500),t=v.devlistList.find(i=>i.oneofDev.oneofKind==="dev"&&i.oneofDev.dev.devType===f.YZWBoot),e++;if(!(t===void 0||t.oneofDev.oneofKind!=="dev"))return t.oneofDev.dev.path};upgrade=async(e,t)=>{t(0);const i=await this.boot_usb();if(i===void 0)return!1;const a=await this.upgrade_dev(e,i,20480,t);return t(1),a};boot_rf=async()=>{let e,t=0;for(;e===void 0&&t<20;)await d(500),e=v.devlistList.find(n=>n.oneofDev.oneofKind==="dev"&&n.oneofDev.dev.path===this.deviceType.devAddr),t++;if(e===void 0||e.oneofDev.oneofKind!=="dev")return;let i=e.oneofDev.dev.path;const a=await this.commonMsgByPath(new Uint8Array([247]),s.Bit7,i);if(a!==void 0&&a[8]===1&&a[7]===1)return i;await d(100),await this.sendMsgByPath(new Uint8Array([248,85,170,85,170,0,0,130]),s.Bit7,i),await d(2e3);let o=0,r=!1;for(;!r&&o<10;){o++;const n=await this.commonMsgByPath(new Uint8Array([247]),s.Bit7,i);r=n!==void 0&&n[8]===1&&n[7]===1,await d(100)}if(r)return i};rfUpgrade=async(e,t)=>{t(0);const i=await this.boot_rf();if(i===void 0)return!1;const a=await this.upgrade_dev(e,i,65536,o=>t(o));if(a){await d(2e3);let o=!1,r=0;for(;!o&&r<10;){const n=await this.commonMsgByPath(new Uint8Array([247]),s.Bit7,i);r++,o=n!==void 0&&n[8]===0&&n[7]===0,o||await d(100)}return t(1),o}return t(1),a}}export{u as CommonMs8KPan1080};
