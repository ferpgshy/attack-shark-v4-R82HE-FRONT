import{u as J,a as U,d as a,r as l,j as i,V as p,_ as X,e as S,I as $,T as ee,l as m,y as j,Y as te,Z as ie}from"./index.b078bf5f.js";import{R as F}from"./18d64e70.js";import{C as _}from"./cd0d5c21.js";import{C as se}from"./d7c9df92.js";import"./3ce44458.js";const de=()=>{J();const c=U(),r=a.getCurrentDevice(),u=a.reportRateOptionList,t=r.鼠标设置,[g,y]=l.useState(r.其他设置.reportRate),[M,C]=l.useState(t.FPS),[W,P]=l.useState(t.运动同步),[A,z]=l.useState(!1),[O,T]=l.useState(!1),E=l.useRef(null);l.useEffect(()=>{y(r.其他设置.reportRate),C(r.鼠标设置.FPS),P(r.鼠标设置.运动同步)},[a.getCurrentDevice().恢复默认状态事件]),l.useEffect(()=>{y(r.其他设置.reportRate)},[r.其他设置.reportRate]);const K=e=>{y(e),r.其他设置.reportRate=e},H=e=>{C(e),r.鼠标设置.FPS=e},N=e=>{P(e),r.鼠标设置.运动同步=e};l.useEffect(()=>{(!u.includes(g)||!u.includes(r.其他设置.reportRate))&&(y(u[u.length-1]),r.其他设置.reportRate=u[u.length-1])},[]),l.useEffect(()=>{C(r.鼠标设置.FPS)},[r.鼠标设置.FPS]),l.useEffect(()=>{y(r.其他设置.reportRate)},[r.其他设置.reportRate]);const o=r.deviceType.type==="mouse"?r.deviceType.dpi:void 0,V=r.deviceType.other?.defaultCurrentDPI??0,f=r.deviceType.other?.defaultDPI,[k,Q]=l.useState(52e3),[d,w]=l.useState(t.dpiList),[v,b]=l.useState(t.currentDpiIndex),[Y,D]=l.useState(!1),L=(e,n,s,x)=>{if(t.dpiList[x??t.currentDpiIndex].x==0){j.error(c.请开启DPI后设置,a.toastOptions);return}t.dpiList=[...t.dpiList.slice(0,x??t.currentDpiIndex),{x:e,y:n,rgb:s},...t.dpiList.slice((x??t.currentDpiIndex)+1)]},Z=()=>{let e=[...d];f!=null&&e.forEach((n,s)=>{n.x=f[s],n.y=f[s]}),e.length>(o?o.count:8)&&(e=e.slice(0,o?o.count:8)),t.dpiList=e,t.currentDpiIndex=V},q=()=>{let e=[...t.dpiList];if(e.length<=0)return e;if(d!==t.dpiList||t.dpiList.length!=(o?.count??8))if(e.length>(o?.count??8))e=e.slice(0,o?.count??8);else{let n=(o?.count??8)-t.dpiList.length;for(let s=0;s<(n>=0?n:0);s++)e.push({x:0,y:0,rgb:e[s].rgb})}return e},B=(e,n=!0)=>{let s=e;return d[s]?d[s].x===0?(s=e+(n?-1:1),d[s]?d[s].x===0?B(s,n):s:(s=n?d.findIndex(x=>x.x!==0):d.findLastIndex(x=>x.x!==0),s)):e:n?d.findIndex(h=>h.x!==0):d.findLastIndex(h=>h.x!==0)};return l.useEffect(()=>{a.getCurrentDevice().恢复默认状态事件==="start_开始调用"&&D(!1),r.deviceType&&"dpi"in r.deviceType&&r.deviceType.dpi&&Q(r.deviceType.other?.dpiDoubleStartValue??r.deviceType.dpi.max/2),t.dpiList[t.currentDpiIndex]||(t.currentDpiIndex=t.currentDpiIndex>t.dpiList.length?t.dpiList.findLastIndex(e=>e.x!==0):t.dpiList.findIndex(e=>e.x!==0),w(t.dpiList),b(t.currentDpiIndex)),t.dpiList[t.currentDpiIndex]||(t.currentDpiIndex=t.currentDpiIndex>t.dpiList.length?t.dpiList.findLastIndex(e=>e.x!==0):t.dpiList.findIndex(e=>e.x!==0),w(t.dpiList),b(t.currentDpiIndex)),!u.includes(g)||!u.includes(r.其他设置.reportRate)?(y(u[u.length-1]),r.其他设置.reportRate=u[u.length-1]):y(r.其他设置.reportRate)},[a.isLoading,a.getCurrentDevice().恢复默认状态事件]),l.useEffect(()=>{D(!0)},[v,d]),l.useEffect(()=>{if(Y){const e=B(t.currentDpiIndex,v>t.currentDpiIndex);if(e!==t.currentDpiIndex){t.currentDpiIndex=e;return}}d[t.currentDpiIndex]&&(b(t.currentDpiIndex),D(!0))},[t.currentDpiIndex]),l.useEffect(()=>{w(q())},[t.dpiList]),l.useEffect(()=>{D(!1)},[a.getCurrentDevice().KB改键设置.当前按键层]),l.useEffect(()=>{z(a.getCurrentDevice().deviceType.id===9998||a.getCurrentDevice().deviceType.id===9997)},[a.getCurrentDevice().deviceType.id]),i.jsx(p,{type:"上下",h:"full",w:"full",style:{display:"flex",flexDirection:"column",position:"relative"},children:i.jsxs(p,{type:"左右___主轴居中",w:"95%",h:"full",style:{padding:"35px",justifyContent:"space-between",boxSizing:"border-box"},children:[i.jsxs(p,{type:"上下",w:"42%",h:"full",style:{minWidth:0,boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[a.isSupportReportRate()&&i.jsx(_,{h:"50%",style:{minHeight:"500px"},title:c.回报率,showQ:!0,titletooltip:c.鼠标回报率提示文本,children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"24px 32px",justifyItems:"start",alignItems:"center",width:"100%",minHeight:"100px",wordBreak:"break-all"},children:u.map((e,n)=>i.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center",flexWrap:"wrap",wordBreak:"break-all"},children:i.jsx(F,{disabled:!1,textColor:"var(--color-text-dark)",style:{fontSize:16,fontFamily:"var(--font-family-regular)",minWidth:"80px",color:g===e?"#74EBD5":"#989898",fontWeight:g===e?500:400,wordBreak:"break-all",whiteSpace:"pre-line"},isSelected:g===e,onClick:()=>K(e),text:e+"Hz"})},e+n))})}),(A||X.findIndex(e=>e.id===r.deviceType.id)!==-1&&["PAW3950","PAW3395","PAW3399"].includes(r.deviceType.sensor))&&i.jsx(_,{h:"50%",title:c.高级设置,style:{marginTop:20},children:i.jsxs(p,{type:"上下",w:"full",style:{gap:20},children:[r.deviceType.sensor==="PAW3950"&&i.jsxs(p,{type:"左右___主轴居中",w:"full",style:{justifyContent:"space-between"},children:[i.jsxs(p,{type:"左右___主轴居中",style:{gap:8},children:[i.jsx(S,{type:"正文内容",text:c.击杀模式}),i.jsx(p,{divRef:E,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:i.jsx($,{type:"问号"})}),i.jsx(ee,{text:c.击鲨竞技模式提示文本,visible:O,position:"right",triggerRef:E})]}),i.jsx(m,{value:M,onChange:H,disabled:!1})]}),i.jsxs(p,{type:"左右___主轴居中",w:"full",style:{justifyContent:"space-between"},children:[i.jsx(p,{type:"左右___主轴居中",style:{gap:8},children:i.jsx(S,{type:"正文内容",text:c.运动同步})}),i.jsx(m,{value:W,onChange:N,disabled:!1})]})]})})]}),i.jsx(p,{type:"上下",w:"calc(58% - 40px)",h:"full",style:{boxSizing:"border-box",display:"flex",flexDirection:"column"},children:i.jsx(_,{title:c.DPI调节,showQ:!0,titletooltip:c.指鼠标移动每英寸点数DPI值鼠标滑动距离相同时DPI越高指针在屏幕移动距离越远,titleRightBtn:!0,titleRightBtnText:c.重置,titleRightBtnClick:Z,childrenheight:"full",children:i.jsxs(p,{type:"上下",w:"full",h:"full",children:[i.jsx(p,{type:"上下",w:"full",h:"calc(100% - 30px)",style:{gap:15,overflowY:"auto"},children:d.map((e,n)=>i.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",gap:15,height:"60px"},children:[i.jsx(p,{w:"auto",children:i.jsx(m,{value:e.x!=0,onChange:s=>{if(d.filter(h=>h.x!==0).length<=1&&!s){j.error(c.至少需要一个DPI,a.toastOptions);return}if(f){const h=o?.min??50;let G={...d[n],x:s?f[n]===0?h:f[n]:0,y:s?f[n]===0?h:f[n]:0},I=[...d];I[n]=G,s?(D(!1),t.currentDpiIndex=n):n==t.currentDpiIndex&&!s&&(t.currentDpiIndex=I.findIndex(R=>R.x!==0)==-1?0:I.findIndex(R=>R.x!==0)),t.dpiList=I}},disabled:!1})}),i.jsx(p,{w:"auto",style:{padding:"0 10px"},children:i.jsx(F,{disabled:!1,Scale:1.5,style:{fontSize:"16px",fontFamily:"regular",color:e.x==0?"#999999":"#333333"},isSelected:v==n,onClick:()=>{if(e.x===0){j.error(c.请开启DPI后设置,a.toastOptions);return}t.currentDpiIndex=n},text:"DPI"+(n+1)})}),e&&e.x!==0&&i.jsxs(i.Fragment,{children:[i.jsx(p,{w:"370px",children:i.jsx(te,{min:o?.min??50,max:o?.max??52e3,step:e.x<k?o?.min??50:o?.delt?o?.delt*2:100,value:e.x,onChange:s=>L(s,s,e.rgb,n),disabled:e.x==0,str:e.x.toString(),showTextAlways:!0})}),i.jsx(ie,{style:{width:"70px",height:"32px",borderRadius:"4px",border:"1px solid #E8EAED",textAlign:"left",backgroundColor:"#F9F9F9",color:"#8C8C8C"},range:{min:o?.min??50,max:o?.max??52e3},disabled:e.x==0,value:e.x,step:e.x<k?o?.min??50:o?.delt?o?.delt*2:100,onChange:s=>L(s,s,e.rgb,n)}),i.jsx(p,{w:"auto",children:i.jsx(se,{color:e.rgb,onClick:()=>{e.x==0&&j.error(c.请开启DPI后设置,a.toastOptions)},onChange:s=>{L(e.x,e.y,s,n)}})})]})]},n))}),i.jsx(p,{type:"左右___主轴居中",w:"full",style:{justifyContent:"flex-end",marginBottom:20},children:i.jsx(S,{type:"辅助内容",wrap:!0,text:"*"+c.可通过输入框编辑或拖动滑块改变DPI值,style:{color:"#999999",fontSize:"12px"}})})]})})})]})})};export{de as Mouse_指针设置};
