import{ae as g,aa as L,b7 as G,s as S,j as e,u as M,a as I,d as n,r as a,af as q,V as s,e as p,b8 as le,b9 as O,ba as K,Z as T,f as H,I as N,aT as Y,bb as z,bc as A,aY as P,aD as ee,a6 as ie,a7 as ae,y as U,c as E,aN as te,aP as ne,a3 as ce,bd as de,be as J,H as Z,bf as ue,a0 as xe,bg as fe,$ as pe,P as he}from"./index.b078bf5f.js";import{R as W}from"./18d64e70.js";import{M as ge}from"./31deba12.js";import{g as ye}from"./0a36fd0f.js";import{SaveToMyWorksDialog as me}from"./1e24668b.js";const we=[{code:"鼠标左键",value:g.Left,x:0,y:0,w:0,h:0},{code:"鼠标右键",value:g.Right,x:0,y:0,w:0,h:0},{code:"滚轮向上",value:g.SCROLLUP,x:0,y:0,w:0,h:0},{code:"滚轮向下",value:g.SCROLLDOWN,x:0,y:0,w:0,h:0},{code:"鼠标滚轮点击",value:g.Middle,x:0,y:0,w:0,h:0},{code:"鼠标前进",value:g.Forward,x:0,y:0,w:0,h:0},{code:"鼠标后退",value:g.Back,x:0,y:0,w:0,h:0},{code:"鼠标Dpi",value:g.Dpi,x:0,y:0,w:0,h:0},{code:"AI Assistant",value:g.AI,x:0,y:0,w:0,h:0},{code:"Print Screen",value:g.PRINT_SCREEN,x:0,y:0,w:0,h:0},{code:"WIN_D",value:g.WIN_D,x:0,y:0,w:0,h:0},{code:"DPI加",value:g.DPI_INC,x:0,y:0,w:0,h:0},{code:"DPI减",value:g.DPI_DEC,x:0,y:0,w:0,h:0}];g.Right,g.Left,g.Middle,g.SCROLLUP,g.SCROLLDOWN,g.Forward,g.Back;const $=(t,r,i,o)=>{if(r!==void 0){if(r.type==="ConfigMacro")return{mode:"已修改",text:"宏"};if(r.type==="forbidden")return{mode:"固件禁用",text:"禁用按键"};if(r.type==="combo"){const c=[],y=L.hidCodeMapKeyName(r.skey);y!==void 0&&c.push(y);const d=L.hidCodeMapKeyName(r.key);d!==void 0&&c.push(d);const w=L.hidCodeMapKeyName(r.key2);return w!==void 0&&c.push(w),{mode:"已修改",text:c.join("+")}}if(r.type==="ConfigMouse")return{mode:"已修改",text:G[r.key]};if(r.type==="ConfigFunction")return{mode:"已修改",text:r.key,value:r.value};if(r.type==="ConfigUnknown")return{mode:"系统按键",text:"系统按键"};if(r.type==="ConfigControlRecoil")return r.gunIndex,{mode:"已修改",text:(r.method==="normal"?"压枪":r.method==="switch_keep"?"开关压枪-持续":"开关压枪-切换")+"_枪械"+(r.gunIndex+1)}}if(i!==void 0){if(i.行程设置.type==="DKS")return{mode:"已修改",text:"DKS"};if(i.行程设置.type==="MT")return{mode:"已修改",text:"MT"};if(i.行程设置.type==="TGL")return{mode:"已修改",text:"TGL"}}if(o!==void 0){let c=L.hidCodeMapHtmlCode(t);if(c===o.key1)return{mode:"已修改",text:"SnapKey:"+o.key2};if(c===o.key2)return{mode:"已修改",text:"SnapKey:"+o.key1}}return{mode:"常规",text:void 0}},se=t=>e.jsx(je,{style:t.style,children:e.jsx(_e,{children:t.children})}),je=S.div({position:"relative",width:"100%",height:"100%"}),_e=S.div({position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#767676",borderRadius:6}}),be=t=>({[g.Left]:{title:"鼠标左键"},[g.Right]:{title:"鼠标右键"},[g.Middle]:{title:"鼠标滚轮点击"},[g.Forward]:{title:"鼠标前进"},[g.Back]:{title:"鼠标后退"},[g.SCROLLUP]:{title:"鼠标滚轮向上"},[g.SCROLLDOWN]:{title:"鼠标滚轮向下"}})[t]||"",ve=()=>{M();const t=I(),r=n.state_鼠标改键,i=r.当前选择的鼠标按键,o=a.useRef(null),c=n.getCurrentDevice().KB改键设置.当前按键层,y=n.getCurrentDevice().KB改键设置.所有改键信息.find(u=>u.profile===c&&u.sonProfile===0)?.configs??[];a.useEffect(()=>{const u=y.find(l=>l.original===r.当前选择的鼠标按键),{mode:f,text:b,value:j}=$(r.当前选择的鼠标按键,u);if(!j){r.火力键.间隔=50,r.火力键.次数=50,r.火力键.选中的按键=null,r.火力键.选中的鼠标按键=null;return}r.火力键.间隔=j[2],r.火力键.次数=j[3];let x=L.hidCodeMapHtmlCode(j[1]);if(x)r.火力键.选中的按键=x;else for(const l in q){const h=Number(l),R=q[h];R&&R.length>2&&R[2]===j[1]&&(r.火力键.选中的鼠标按键=h)}},[r.当前选择的鼠标按键]);const[d,w]=a.useState(!1);return e.jsxs(s,{type:"上下",w:"full",h:"full",style:{flex:"1 1 0%",overflowY:"auto",boxSizing:"border-box"},children:[!d&&e.jsxs(e.Fragment,{children:[e.jsxs(s,{type:"上下___交叉轴居左",w:"full",h:"full",style:{flex:"1 1 0%",padding:"20px 0"},children:[e.jsx(s,{w:"full",h:"auto",type:"左右",style:{marginBottom:"20px"},children:e.jsx(p,{type:"提示文本",text:t.请先选择鼠标按键后设置})}),e.jsx(s,{style:{marginBottom:"24px"},children:e.jsx(p,{type:"小标题",text:t.火力键})}),e.jsxs(s,{type:"左右",w:"full",h:"auto",style:{justifyContent:"space-between",alignItems:"center",gap:"32px",flexWrap:"wrap"},children:[e.jsxs(s,{type:"左右",style:{gap:12,alignItems:"center"},children:[e.jsx(p,{type:"正文内容",text:t.按键}),e.jsx("div",{ref:o,children:e.jsx(le,{isSelected:i!==null,text:r.火力键.选中的按键?O[r.火力键.选中的按键]?O[r.火力键.选中的按键]:K[r.火力键.选中的按键]??r.火力键.选中的按键:r.火力键.选中的鼠标按键?t[be(r.火力键.选中的鼠标按键).title]:"",onClick:()=>{w(!0)}})})]}),e.jsxs(s,{type:"左右",style:{gap:12,alignItems:"center"},children:[e.jsx(p,{type:"正文内容",text:t.间隔}),e.jsx(T,{range:{min:1,max:255},style:{width:"80px",border:"1px solid #E0E0E0",borderRadius:"6px",backgroundColor:"#FFFFFF",textAlign:"center",fontSize:"14px"},value:r.火力键.间隔,onChange:u=>{r.火力键.间隔=u}}),e.jsx(p,{type:"正文内容",text:"ms"})]}),e.jsxs(s,{type:"左右",style:{gap:12,alignItems:"center"},children:[e.jsx(p,{type:"正文内容",text:t.循环}),e.jsx(T,{range:{min:1,max:255},style:{width:"80px",border:"1px solid #E0E0E0",borderRadius:"6px",backgroundColor:"#FFFFFF",textAlign:"center",fontSize:"14px"},value:r.火力键.次数,onChange:u=>{r.火力键.次数=u}}),e.jsx(p,{type:"正文内容",text:t.次})]})]})]}),e.jsx(s,{type:"上下",w:"full",h:"full",style:{padding:"30px 0 10px 0"},children:e.jsx(s,{type:"左右",w:"full",h:"full",style:{backgroundColor:"#FFFFFF",borderRadius:"12px",gap:"20px",alignItems:"flex-start"},children:e.jsxs(s,{type:"上下___交叉轴居左",h:"full",style:{flex:1,gap:"16px",justifyContent:"flex-start"},children:[e.jsx(p,{type:"小标题",text:t.禁用按键}),e.jsxs(s,{type:"左右",style:{alignItems:"flex-end"},w:"full",children:[e.jsxs(s,{type:"上下",style:{gap:"12px",paddingLeft:"0",alignItems:"flex-start",flex:"0 0 75%"},children:[e.jsx(s,{type:"左右",children:e.jsx(p,{type:"正文内容",wrap:!0,text:t.禁用鼠标说明文本_1})}),e.jsx(s,{type:"左右",children:e.jsx(p,{type:"正文内容",wrap:!0,text:t.禁用鼠标说明文本_2})}),e.jsx(s,{type:"左右",children:e.jsx(p,{type:"正文内容",wrap:!0,text:t.禁用按键说明文本_3})})]}),e.jsx(s,{type:"上下",style:{flex:"0 0 25%"},children:e.jsx(H,{text:t.禁用按键,onClick:()=>{r.设置改键("禁用按键")},disabled:r.当前选择的鼠标按键===null,style:{backgroundColor:r.当前选择的鼠标按键===null?"#E0E0E0":"#74EBD5",color:r.当前选择的鼠标按键===null?"#999999":"#FFFFFF",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:r.当前选择的鼠标按键===null?"not-allowed":"pointer",transition:"all 0.3s ease",flexShrink:0},w:130})})]})]})})})]}),d&&e.jsx(Ce,{onClose:()=>{w(!1)}})]})},Ce=t=>{const r=["鼠标左键","鼠标右键","鼠标前进","鼠标后退","鼠标滚轮点击"],i=I();return e.jsxs(s,{type:"上下",w:"full",h:"full",style:{alignItems:"flex-start",justifyContent:"flex-start",overflowX:"hidden",background:"#fff",gap:"20px"},children:[e.jsxs(s,{type:"左右",w:"full",style:{alignItems:"center",justifyContent:"center",height:48,position:"relative",marginBottom:8},children:[e.jsx(s,{style:{position:"absolute",left:0,top:0,height:"100%",display:"flex",alignItems:"center",paddingLeft:8},children:e.jsx(N,{type:"返回",onClick:t.onClose})}),e.jsx(p,{type:"小标题",text:i.火力键,style:{fontWeight:500,fontSize:18,textAlign:"center"}})]}),e.jsxs(se,{children:[e.jsxs(s,{type:"上下",w:"full",style:{alignItems:"flex-start",justifyContent:"flex-start",marginBottom:"10px"},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:26,children:e.jsx(p,{type:"小标题",text:i.鼠标按键})}),e.jsx(Se,{children:we.filter(o=>r.includes(o.code)).sort((o,c)=>r.indexOf(o.code)-r.indexOf(c.code)).map(o=>e.jsx(Y,{type:o.code,isCurrent:n.state_鼠标改键.火力键.选中的鼠标按键===o.value,onClick:()=>{n.state_鼠标改键.火力键.选中的按键=null,n.state_鼠标改键.火力键.选中的鼠标按键=n.state_鼠标改键.火力键.选中的鼠标按键===o.value?null:o.value,t.onClose()},page:1,TextColor:"#222"},o.value))})]}),e.jsxs(s,{w:"full",type:"上下___交叉轴居左",style:{marginTop:8,justifyContent:"flex-start"},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:26,style:{justifyContent:"flex-start",gap:"0px",marginBottom:8},children:e.jsx(p,{type:"小标题",text:i.键盘按键})}),e.jsxs(s,{type:"上下",w:"full",h:"auto",style:{gap:"0px",marginBottom:12},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:"auto",style:{marginBottom:8},children:e.jsx(p,{type:"小标题",text:i.基本字符,style:{marginBottom:4}})}),e.jsx(z,{children:Object.entries(O).map(([o,c],y)=>e.jsx(A,{keyCode:o,text:O[o],onClick:()=>{n.state_鼠标改键.火力键.选中的鼠标按键=null,n.state_鼠标改键.火力键.选中的按键=o,t.onClose()},press:n.state_鼠标改键.火力键.选中的按键==String(o),disabled:!1,wrap:!1},y))})]}),e.jsxs(s,{type:"上下",w:"full",h:"auto",style:{gap:"0px",marginBottom:0},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:"auto",style:{marginBottom:8},children:e.jsx(p,{type:"小标题",text:i.拓展字符,style:{marginBottom:4}})}),e.jsx(z,{children:Object.entries(K).map(([o,c],y)=>e.jsx(A,{keyCode:o,text:K[o],onClick:()=>{n.state_鼠标改键.火力键.选中的鼠标按键=null,n.state_鼠标改键.火力键.选中的按键=o,t.onClose()},press:n.state_鼠标改键.火力键.选中的按键==String(o),disabled:!1,wrap:!0},y))})]})]})]})]})},Se=S.div({display:"flex",flexDirection:"row",gap:"24px",width:"100%",justifyContent:"flex-start",minHeight:"3.5rem",boxSizing:"border-box"}),ke=""+new URL("../assets/images/清空.5a978c9c.svg",import.meta.url).href,Ee=""+new URL("../assets/images/Vector.101483ec.svg",import.meta.url).href,De=""+new URL("../assets/images/mingcute_add-fill.e59df735.svg",import.meta.url).href,Re=""+new URL("../assets/images/mingcute_minimize-fill.3e1e6bc7.svg",import.meta.url).href,Fe=""+new URL("../assets/images/Save_White.fb061d1a.svg",import.meta.url).href,Ie=()=>{const t=I(),r=n.state_鼠标改键;r.当前选择的鼠标按键;const i=r.压枪键,o=n.getCurrentDevice(),c=o.鼠标设置.枪械信息;a.useState(!1),a.useRef(null);const[y,d]=a.useState("灵敏模式"),[w,u]=a.useState(!1),[f,b]=a.useState(null),[j,x]=a.useState(!1),[l,h]=a.useState(i.当前Ui子弹列表),[R,k]=a.useState(i.当前Ui子弹列表.length),[v,C]=a.useState(!1);a.useEffect(()=>{u(!1)},[n.getCurrentDevice()]),a.useEffect(()=>{if(o.鼠标设置.读取所有枪械信息事件!=="none_调用结束"||o.鼠标设置.state_同步枪械信息到设备.事件!=="none_调用结束"?n.isLoading=!0:n.isLoading=!1,i.压枪键索引<0||o.deviceType.id===void 0||o.鼠标设置.读取所有枪械信息事件!=="none_调用结束"||o.鼠标设置.state_同步枪械信息到设备.事件!=="none_调用结束")return;const _=o.鼠标设置.枪械信息[i.压枪键索引],m=_==null?[]:_.values;r.压枪键.当前Ui子弹列表=P(m),h(P(m)),k(m.length),C(!1)},[i.压枪键索引,o.鼠标设置.读取所有枪械信息事件,o.鼠标设置.state_同步枪械信息到设备.事件]),a.useEffect(()=>{if(i.压枪键索引!==-1&&c.length>0){const _=ee(l,c[i.压枪键索引].values);C(!_)}},[l,i.压枪键索引,c]);const F=()=>{v?x(!0):u(!1)},X=()=>{x(!1)},V=()=>{if(i.压枪键索引!==-1&&c.length>0&&c[i.压枪键索引]){const _=P(c[i.压枪键索引].values);h(_),k(_.length),C(!1)}x(!1),u(!1)},re=()=>{if(i.压枪键索引===-1||!c[i.压枪键索引]){U.error("请先选择有效的枪支",n.toastOptions);return}const _=P(l);i.当前Ui子弹列表=_,o.鼠标设置.枪械信息[i.压枪键索引].values=_,C(!1),o.鼠标设置.state_同步枪械信息到设备={gunIndex:i.压枪键索引,事件:"start_开始调用"},U.success(t.保存成功,n.toastOptions)},oe=()=>{k(0),h([]),C(!0)};return a.useEffect(()=>{const _=m=>{j&&(m.key==="Escape"?X():m.key==="Enter"&&V())};return j&&document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[j]),e.jsxs(s,{type:"上下",w:"full",h:"full",style:{gap:"10px"},children:[!w&&e.jsxs(e.Fragment,{children:[e.jsx(s,{type:"左右",w:"full",style:{justifyContent:"flex-start"},children:e.jsx(p,{type:"提示文本",text:t.请先选择鼠标按键后设置||"*请先选择鼠标按键后设置"})}),e.jsxs(s,{type:"上下",w:"full",h:"full",style:{flex:"1 1 0%",gap:"10px"},children:[e.jsxs(s,{type:"左右",w:"full",style:{gap:"15px",flexWrap:"wrap"},children:[e.jsx(N,{type:"同步",style:{width:118,height:26,color:"#BDBDBD",borderRadius:13,fontSize:14,fontWeight:400,cursor:"pointer",marginRight:8,padding:"8px"},textColor:"#989898",bgcolorHover:"#74ebd51a",bgcolor:"#F5F5F5",border:"1px solid #74EBD5",text:t.同步枪数据||"同步枪数据",onClick:()=>{const _=n.getCurrentDevice();_.鼠标设置.读取所有枪械信息事件="start_开始调用"}}),e.jsxs(s,{type:"左右",style:{gap:"15px",flex:1,minWidth:260,flexWrap:"wrap"},children:[e.jsx(p,{type:"小标题",text:t.压枪模式||"压枪模式"}),e.jsxs(s,{type:"左右",style:{gap:"20px",rowGap:8,minWidth:200,flexWrap:"wrap"},children:[e.jsx(W,{isSelected:y==="灵敏模式",onClick:()=>{d("灵敏模式"),i.类型="压枪"},text:t.灵敏模式}),e.jsx(W,{isSelected:y==="开关压枪持续",onClick:()=>{d("开关压枪持续"),i.类型="持续"},text:t.开关压枪持续}),e.jsx(W,{isSelected:y==="开关压枪切换",onClick:()=>{d("开关压枪切换"),i.类型="切换"},text:t.开关压枪切换})]})]})]}),e.jsx("div",{style:{width:"100%",maxHeight:"calc(100% - 60px)",overflowY:"auto",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"8px",paddingBottom:f?"35px":"0px"},children:c.map((_,m)=>e.jsx(ze,{isSelected:i.压枪键索引===m,gunName:t.枪支+(m+1),onClick:()=>{i.压枪键索引=i.压枪键索引===m?-1:m},showMenu:f===m,onMenuClick:()=>b(f===m?null:m),onEdit:()=>{i.压枪键索引=m,b(null),u(!0)}},m))})]})]}),w&&c.length>0&&i.压枪键索引!=-1&&e.jsxs(s,{type:"上下",w:"full",h:"full",style:{alignItems:"flex-start",justifyContent:"flex-start",overflowY:"auto",overflowX:"hidden",background:"#fff"},children:[e.jsxs(s,{type:"左右___主轴居中",w:"full",h:"auto",style:{position:"relative",marginBottom:"12px"},children:[e.jsx(s,{style:{position:"absolute",left:0,top:0,height:"100%",display:"flex",alignItems:"center",paddingLeft:8},children:e.jsx(N,{type:"返回",onClick:()=>{F()}})}),e.jsx(p,{type:"小标题",text:t.枪支+(c[i.压枪键索引].index+1),style:{fontWeight:500,fontSize:18,textAlign:"center"}})]}),e.jsxs(s,{w:"full",type:"左右",style:{justifyContent:"space-between",padding:"12px"},children:[e.jsxs(s,{w:"auto",children:[e.jsx(p,{type:"辅助内容",text:t.子弹数||"子弹数"}),e.jsx(Pe,{range:{min:0,max:85},style:{width:"70px"},value:R,onChange:_=>{const m=[...l],B=m.length;if(_>B)for(let D=0;D<_-B;D++)m.push({delay:50,x:0,y:0});else _<B&&m.splice(_);h(P(m)),k(_)}})]}),e.jsxs(s,{w:"auto",style:{gap:10},children:[e.jsx(Q,{url:ke,text:t.清空,color:"white",alwayShow:!0,style:{border:"0",borderRadius:"6px",background:"#71A4F1",color:"white"},onClick:oe}),e.jsx(Q,{url:Fe,text:t.保存,color:"white",alwayShow:!0,style:{border:"0",borderRadius:"6px",background:v?"#ff6b6b":"#71A4F1",color:"white"},onClick:re})]})]}),e.jsxs("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",padding:"12px",background:"#F6F6F6"},children:[e.jsx(s,{type:"左右___主轴居中",children:e.jsx(p,{type:"辅助内容",text:t.子弹})}),e.jsx(s,{type:"左右___主轴居中",children:e.jsx(p,{type:"辅助内容",text:t.延迟+"[ms]"})}),e.jsx(s,{type:"左右___主轴居中",children:e.jsx(p,{type:"辅助内容",text:"X="})}),e.jsx(s,{type:"左右___主轴居中",children:e.jsx(p,{type:"辅助内容",text:"Y="})})]}),e.jsx(se,{children:l.map((_,m)=>e.jsxs("div",{style:{width:"100%",display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",padding:"15px 0",borderBottom:"1px solid #E0E0E0"},children:[e.jsx(s,{type:"上下",children:e.jsxs(s,{h:"full",style:{position:"relative"},children:[e.jsx("img",{src:Ee,alt:"",style:{height:"100%"}}),e.jsx(p,{type:"设备型号",text:String(m+1),style:{position:"absolute",right:0,bottom:0,color:"#3E3E3E",transform:"translateX(50%) translateY(30%)"}})]})}),e.jsx(T,{range:{min:1,max:255},value:_.delay,onChange:B=>{const D=[...l];D[m]={...D[m],delay:B},h(D)}}),e.jsx(T,{range:{min:-127,max:127},value:_.x,onChange:B=>{const D=[...l];D[m]={...D[m],x:B},h(D)}}),e.jsx(T,{range:{min:-127,max:127},value:_.y,onChange:B=>{const D=[...l];D[m]={...D[m],y:B},h(D)}})]},m))})]}),j&&e.jsx($e,{title:t.提示,message:t.检测到当前枪械数据有未保存的修改返回将会放弃这些修改确认是否退出枪支编辑,onCancel:X,onConfirm:V})]})},Be=S.div(t=>({width:t.w??"16px",height:t.w??"16px",overflow:"hidden",display:"inline-block",">img":{width:"100%",height:"100%",[t.alwayShow?"filter":""]:`drop-shadow(-${t.w??"16px"} 0 0px ${t.color??"#74EBD5"})`,[t.alwayShow?"transform":""]:`translateX(${t.w??"16px"})`},"&:hover >img":{transform:`translateX(${t.w??"16px"})`,filter:`drop-shadow(-${t.w??"16px"} 0 0px ${t.color??"#74EBD5"})`}})),Me=S.div(t=>({display:"flex",alignItems:"center",padding:"4px 8px",border:"2px solid #74EBD5",borderRadius:"25px",backgroundColor:"rgba(116, 235, 213, 0.10)",color:"#74EBD5",cursor:"pointer","&:hover":{color:"#74EBD5"}})),Q=t=>e.jsxs(Me,{style:{cursor:t.disabled?"not-allowed":"pointer",...t.style},onClick:()=>{t.disabled||t.onClick&&t.onClick()},children:[t.children?t.children:e.jsx(Be,{ref:t.divRef,onClick:t.onClick,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,alwayShow:t.alwayShow,color:t.color,children:e.jsx("img",{src:t.url||t.img?.url,alt:""})}),e.jsx("p",{style:{margin:"0 0 0 8px"},children:t.text||t.img?.text})]}),Le=S.div`
    padding: 12px;
    border-radius: 8px;
    border: ${t=>t.isSelected?"1px solid #74EBD5":"1px solid #E0E0E0"};
    background-color: ${t=>t.isSelected?"#F0FDFA":"white"};
    cursor: pointer;
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    &:hover {
        background: #e6f9f5;
        border: 1px solid #74EBD5;
        z-index: 2;
    }
`,Te=S.div`
    position: absolute;
    top: 100%;
    right: 0;
    background-color: white;
    border: 1px solid #E0E0E0;
    border-radius: 4px;
    z-index: 1000;
    min-width: 100px;
    overflow: hidden;
`,We=S.div`
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
`,Oe=S.div`
    position: relative;
    display: flex;
    flex-direction: row-reverse;
    align-items: center;
`,ze=t=>{const r=a.useRef(null),i=I();return a.useEffect(()=>{const o=c=>{r.current&&!r.current.contains(c.target)&&t.onMenuClick()};return t.showMenu&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[t.showMenu]),e.jsxs(Le,{isSelected:t.isSelected,onClick:t.onClick,children:[e.jsx(p,{type:"小标题",text:t.gunName}),e.jsxs(Oe,{style:{width:"30%"},onClick:o=>{o.stopPropagation(),t.onMenuClick()},children:[e.jsx(p,{type:"小标题",text:"···",style:{cursor:"pointer",fontSize:"18px",letterSpacing:"-12px"}}),t.showMenu&&e.jsx(Te,{ref:r,children:e.jsx(We,{onClick:o=>{o.stopPropagation(),t.onEdit()},children:e.jsx(p,{type:"小标题",text:i.编辑})})})]})]})},Pe=t=>{const[r,i]=a.useState(window.innerWidth),[o,c]=a.useState(t.value.toString());a.useEffect(()=>{t.range&&(t.value<t.range.min?c(t.range.min.toString()):t.value>t.range.max&&c(t.range.max.toString())),c(t.value.toString())},[t.value]),a.useEffect(()=>{const x=()=>{i(window.innerWidth)};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}},[]);const y=()=>r<=1280?50:r<=1440?55:60,d=()=>r<=1280?12:14,w=x=>{const l=x.target.value;t.range&&(parseInt(l)<t.range.min?c(t.range.min.toString()):parseInt(l)>t.range.max&&c(t.range.max.toString())),c(l)},u=()=>{let x=parseInt(o)||1;t.range&&(x<t.range.min?x=t.range.min:x>t.range.max&&(x=t.range.max)),t.onChange(x),c(x.toString())},f=x=>{x.key==="Enter"&&x.currentTarget.blur()},b=()=>{if(t.disabled)return;let x=parseInt(o);x+=1,t.range&&x>t.range.max&&(x=t.range.max),c(x.toString()),t.onChange(x)},j=()=>{if(t.disabled)return;let x=parseInt(o)||1;x-=1,t.range&&x<t.range.min&&(x=t.range.min),c(x.toString()),t.onChange(x)};return e.jsxs(s,{type:"左右___主轴居中",style:{marginLeft:r<=1280?5:10},children:[e.jsx("img",{src:Re,onClick:j}),e.jsx(s,{style:{position:"relative",margin:"0 5px"},children:e.jsx("input",{disabled:t.disabled,value:o,onChange:w,onBlur:u,onKeyDown:f,style:{width:y(),height:r<=1280?26:30,borderRadius:r<=1280?4:8,border:"1px solid #3e3e3e",padding:r<=1280?"0 15px 0 5px":"0 20px 0 8px",fontSize:d(),textAlign:"center",backgroundColor:t.disabled?"var(--color-background-disabled)":"white",cursor:t.disabled?"not-allowed":"auto",...t.style}})}),e.jsx("img",{src:De,onClick:b})]})},Ke=S.div`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
`,Ae=S.div`
    background: #606060;
    border-radius: 12px;
    padding: 0;
    min-width: 380px;
    max-width: 95vw;
    width: 380px;
    height: 220px;
    position: relative;
    box-shadow: 0 4px 24px rgba(0,0,0,0.18);
    display: flex;
    flex-direction: column;
    align-items: center;
`,He=S.div`
    width: 100%;
    font-size: 16px;
    font-weight: 400;
    color: #fff;
    text-align: center;
    margin-top: 18px;
    margin-bottom: 0;
    font-family: var(--font-family-regular);
    line-height: 22px;
`,Ne=S.div`
    width: 100%;
    font-size: 14px;
    color: var(--color-background-white);
    text-align: left;
    white-space: wrap;
    margin-top: 22px;
    margin-bottom: 0;
    padding-left: 32px;
    font-family: var(--font-family-regular);
    line-height: 22px;
`,Ue=S.div`
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 32px;
    position: absolute;
    bottom: 32px;
    left: 0;
`,$e=t=>{const r=I();return e.jsx(Ke,{onClick:t.onCancel,children:e.jsxs(Ae,{onClick:i=>i.stopPropagation(),children:[e.jsx(He,{children:t.title}),e.jsx(Ne,{children:t.message}),e.jsxs(Ue,{children:[e.jsx(ie,{onClick:t.onCancel,text:r.取消}),e.jsx(ae,{onClick:t.onConfirm,text:r.确定})]})]})})},Ge=()=>{M();const t=I(),r=E.改键_组合键列表_全局,i=u=>{E.改键_组合键列表_全局||(E.改键_组合键列表_全局=[]);const f=document.getElementById("key-binding-tip");if(f&&E.改键_组合键列表_全局.length>0&&(f.style.display="none"),E.改键_显示高亮=!1,E.改键_组合键列表_全局.includes(u))E.改键_组合键列表_全局=E.改键_组合键列表_全局.filter(b=>b!==u);else{if(E.改键_组合键列表_全局.length>=3)return;E.改键_组合键列表_全局.push(u)}},o=n.getCurrentDevice().KB改键设置.当前按键层,c=n.state_鼠标改键.当前选择的鼠标按键,y=n.getCurrentDevice().KB改键设置.所有改键信息.find(u=>u.profile===o&&u.sonProfile===0)?.configs??[];a.useEffect(()=>{const u=y.find(h=>h.original===n.state_鼠标改键.当前选择的鼠标按键),{mode:f,text:b,value:j}=$(n.state_鼠标改键.当前选择的鼠标按键,u);if(!b){E.改键_组合键列表_全局=[];return}let x=b.split("+");const l=[];if(u!=null&&u.type==="combo")for(let h in x)l.push(L.keyNameMapHtmlCode(x[h]));E.改键_组合键列表_全局=l},[n.state_鼠标改键.当前选择的鼠标按键]);const d=a.useRef(null),w=te(d);return e.jsxs(s,{type:"上下",w:"auto",h:"full",style:{flex:"1 1 0%",alignItems:"self-end"},children:[e.jsx(s,{type:"左右",w:"full",style:{justifyContent:"space-between"},children:e.jsxs(s,{w:"auto",h:"auto",type:"左右",style:{gap:"20px",flexWrap:"wrap"},children:[e.jsx(p,{type:"提示文本",text:t.请先选择鼠标按键后设置}),e.jsx(p,{type:"提示文本",text:t.组合键最多可选择3个字符})]})}),e.jsx(ne,{ref:d,$isScrollbarHovered:w,style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:"12px"},children:e.jsxs(s,{type:"上下",w:"full",h:"auto",style:{gap:"12px"},children:[e.jsx(s,{h:10}),e.jsxs(s,{type:"上下",w:"full",h:"auto",style:{gap:"10px"},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:"auto",children:e.jsx(p,{type:"小标题",text:t.基本字符})}),e.jsx(z,{children:Object.entries(O).map(([u,f],b)=>e.jsx(A,{keyCode:u,text:O[u],onClick:()=>i(u),press:r?.includes(u),disabled:c===null||!r?.includes(u)&&(r?.length||0)>=3,wrap:!1},b))})]}),e.jsxs(s,{type:"上下",w:"full",h:"full",style:{borderRadius:"12px",gap:"10px"},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:"auto",children:e.jsx(p,{type:"小标题",text:t.拓展字符})}),e.jsx(z,{children:Object.entries(K).map(([u,f],b)=>e.jsx(A,{keyCode:u,text:K[u],onClick:()=>i(u),press:r?.includes(u),disabled:c===null||!r?.includes(u)&&(r?.length||0)>=3,wrap:!0},b))})]})]})})]})},Ye=()=>{M();const t=I(),r=ce.useRef(null),i=te(r),c=n.state_鼠标改键.当前选择的鼠标按键,y={id:"",name:"",delay:0,loopTime:0,type:"循环次数",event:[]};return a.useEffect(()=>()=>{n.currentSelectedMacro_键盘设置_宏设置=JSON.parse(JSON.stringify(y))},[]),n.宏列表,e.jsxs(s,{type:"上下",w:"full",h:"full",style:{gap:"10px",flex:"1 1 auto"},children:[e.jsx(s,{type:"左右",w:"full",h:"auto",style:{flex:"1 1 auto"},children:e.jsx(s,{w:"full",h:"auto",type:"左右",style:{flex:"1 1 30%",flexWrap:"wrap"},children:e.jsx(p,{type:"提示文本",text:t.请先选择鼠标按键后设置})})}),e.jsxs(s,{type:"左右",w:"full",style:{gap:"12px",alignItems:"center",flexWrap:"nowrap",minHeight:40},children:[e.jsx(N,{type:"编辑",style:{width:118,height:26,color:"#BDBDBD",borderRadius:9,fontSize:14,fontWeight:400,cursor:"pointer",marginRight:8,padding:"8px"},textColor:"#989898",bgcolorHover:"#74ebd51a",bgcolor:"#F5F5F5",border:"1px solid #74EBD5",text:t.添加编辑||"添加/编辑",onClick:()=>{E.currentHomePageIndex=de.宏编辑页}}),e.jsxs(s,{w:"full",style:{flex:"1 1 62px",background:"#fff",borderRadius:12,gap:"1vw",padding:"0.5vh 1vw",flexWrap:"wrap"},children:[e.jsxs(s,{children:[e.jsx(W,{textColor:"var(--color-text-dark)",style:{fontSize:14,fontFamily:"var(--font-family-regular)",width:56,height:32},isSelected:n.currentSelectedMacro_键盘设置_宏设置.type==="循环次数",text:t.循环||"循环",onClick:()=>{n.currentSelectedMacro_键盘设置_宏设置.type="循环次数"}}),e.jsx(T,{style:{width:100,height:32},range:{min:1,max:65535},disabled:n.currentSelectedMacro_键盘设置_宏设置?.type!=="循环次数",value:n.currentSelectedMacro_键盘设置_宏设置?.loopTime??1,onChange:d=>{n.currentSelectedMacro_键盘设置_宏设置&&(n.currentSelectedMacro_键盘设置_宏设置.loopTime=d)}})]}),e.jsx(W,{style:{fontSize:14,fontFamily:"var(--font-family-regular)",width:56,height:32},isSelected:n.currentSelectedMacro_键盘设置_宏设置.type==="使用指派按键切换开/关播放",text:t.自动||"自动",onClick:()=>{n.currentSelectedMacro_键盘设置_宏设置.type="使用指派按键切换开/关播放"}}),e.jsx(W,{style:{fontSize:14,fontFamily:"var(--font-family-regular)",width:56,height:32},isSelected:n.currentSelectedMacro_键盘设置_宏设置.type==="按下播放",text:t.按下||"按下",onClick:()=>{const d=n.state_鼠标改键.当前选择的鼠标按键;if(d===g.SCROLLUP||d===g.SCROLLDOWN){U.error(t.鼠标滚轮向上滚轮向下禁止设置按下播放方式的宏,n.toastOptions);return}n.currentSelectedMacro_键盘设置_宏设置.type="按下播放"}})]})]}),e.jsx(ne,{ref:r,$isScrollbarHovered:i,id:"grid-view-for-macro",style:{width:"100%",height:"100%",padding:"12px",border:"1px solid #EEEEEE",borderRadius:"8px",overflowY:"auto"},children:e.jsx(s,{type:"左右",w:"full",h:"full",style:{gap:"12px",flexWrap:"wrap",alignContent:"flex-start",alignItems:"flex-start"},children:E.宏列表?.map((d,w)=>e.jsx(s,{type:"左右",children:e.jsx(A,{width:"20ch",textOverflow:"ellipsis",textLength:d.name.length,notSqure:!0,text:d.name,keyCode:d.name,press:n.currentSelectedMacro_键盘设置_宏设置===d,onClick:()=>{n.currentSelectedMacro_键盘设置_宏设置===d?n.currentSelectedMacro_键盘设置_宏设置=JSON.parse(JSON.stringify(y)):n.currentSelectedMacro_键盘设置_宏设置=d,n.改键_显示高亮=!1},disabled:c===null})},w))})})]})},Xe=()=>{M();const t=I();n.state_鼠标改键.当前选择的鼠标按键;const i=n.getCurrentDevice().deviceType,o=i.other?.hasRecoilControl,c=i.other?.isCountDown;a.useEffect(()=>()=>{n.改键_选中的特殊按键=null,n.改键_选中的鼠标按键=null},[]);const y=[{ys:"fn",fi:"fn"},{ys:"上一曲",fi:"上一曲"},{ys:"下一曲",fi:"下一曲"},{ys:"停止",fi:"停止"},{ys:"静音",fi:"静音"},{ys:"音量加",fi:"音量加"},{ys:"音量减",fi:"音量减"},{ys:"播放器",fi:"播放器"},{ys:"计算器",fi:"计算器"},{ys:"邮件",fi:"邮件"},{ys:"我的电脑",fi:"我的电脑"},{ys:"搜索",fi:"搜索"},{ys:"主页",fi:"主页"},{ys:"亮度加",fi:"亮度加"},{ys:"亮度减",fi:"亮度减"},{ys:"刷新",fi:"刷新"},{ys:"放大",fi:"放大"},{ys:"缩小",fi:"缩小"},{ys:"麦克风开关",fi:"麦克风开关"},{ys:"dpi+",fi:"DPI加"},{ys:"dpi-",fi:"DPI减"},{ys:"dpi_loop",fi:"DPI"},{ys:"Profile加",fi:"Profile加"},{ys:"Profile减",fi:"Profile减"},{ys:"profile_loop",fi:"按键层切换"},...c?[{ys:"倒计时",fi:"倒计时"}]:[],...o?[{ys:"枪械切换加",fi:"枪械切换加"},{ys:"枪械切换减",fi:"枪械切换减"},{ys:"枪械切换(循环)",fi:"枪械切换循环"}]:[]],d=n.getCurrentDevice().deviceType.id===9998||n.getCurrentDevice().deviceType.id===9997?["系统睡眠"]:[],w=n.getCurrentDevice().KB改键设置.当前按键层,u=n.getCurrentDevice().KB改键设置.所有改键信息.find(f=>f.profile===w&&f.sonProfile===0)?.configs??[];return a.useEffect(()=>{if(!n.state_鼠标改键.当前选择的鼠标按键)n.改键_选中的特殊按键=null,n.改键_选中的鼠标按键=null;else{const f=u.find(h=>h.original===n.state_鼠标改键.当前选择的鼠标按键),{mode:b,text:j,value:x}=$(n.state_鼠标改键.当前选择的鼠标按键,f);if(!j){n.改键_选中的特殊按键=null,n.改键_选中的鼠标按键=null;return}let l=y.find(h=>h.ys==j);l?(n.改键_选中的特殊按键=l.ys,n.改键_选中的鼠标按键=null):(n.改键_选中的鼠标按键=J[j],n.改键_选中的特殊按键=null)}},[n.state_鼠标改键.当前选择的鼠标按键]),a.useEffect(()=>{n.isLoading||(n.改键_选中的特殊按键=null,n.改键_选中的鼠标按键=null)},[n.isLoading]),e.jsxs(s,{type:"上下",w:"full",h:"full",style:{gap:"10px",flex:"1 1 0%"},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:"auto",style:{gap:"50px"},children:e.jsx(s,{w:"full",h:"auto",type:"左右",style:{gap:"50px"},children:e.jsx(s,{h:"auto",children:e.jsx(p,{type:"提示文本",text:t.请先选择鼠标按键后设置})})})}),e.jsx(s,{w:"full",h:"full",type:"上下",style:{overflowY:"auto"},children:e.jsxs(s,{type:"上下",w:"full",h:"auto",children:[e.jsxs(s,{type:"上下",w:"full",h:"auto",children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:"auto",children:e.jsx(p,{type:"小标题",text:t.功能})}),e.jsxs(z,{children:[y.map(f=>e.jsx(Y,{type:f.fi,isCurrent:n.改键_选中的特殊按键===f.ys,onClick:()=>{n.改键_选中的特殊按键=n.改键_选中的特殊按键==f.ys?null:f.ys,n.改键_选中的鼠标按键=null},page:Z.键盘设置页},f.fi)),d.map(f=>e.jsx("div",{style:{width:"clamp(2.5rem, 4vw, 3.5rem)",height:"clamp(2.5rem, 4vw, 3.5rem)",backgroundColor:n.改键_选中的特殊按键===f?"#F9F9F9":"#FFFFFF",borderRadius:"10%",border:"1px solid #D5D5D5",color:n.改键_选中的特殊按键===f?"#74EBD5":"black",textAlign:"center"},onClick:()=>{n.改键_选中的特殊按键=n.改键_选中的特殊按键==f?null:f,n.改键_选中的鼠标按键=null},children:f}))]})]}),e.jsxs(s,{type:"上下",w:"full",h:"full",style:{borderRadius:"12px"},children:[e.jsx(s,{type:"上下___交叉轴居左",w:"full",h:"auto",children:e.jsx(p,{type:"小标题",text:t.鼠标功能})}),e.jsx(z,{children:Object.entries(J).map(([f,b])=>e.jsx(Y,{type:f,isCurrent:n.改键_选中的鼠标按键==b,onClick:()=>{n.改键_选中的鼠标按键=n.改键_选中的鼠标按键==b?null:b,n.改键_选中的特殊按键=null},page:Z.键盘设置页},f))})]})]})})]})},Ve=S.div`
  flex: 1;
  background: #fff;
  border: 1px solid #E0E0E0;
  border-radius: 12px;
  overflow: hidden;
  min-height: 0;
  padding: 20px;
  display: flex;
  flex-direction: column;
  width: 100%;
  box-sizing: border-box;
`,qe=S.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
`,Je=()=>{M();const[t,r]=a.useState(0),[i,o]=a.useState(0),[c,y]=a.useState("down"),[d,w]=a.useState(!0),{isParentAnimating:u}=ue(),f=I(),j=n.getCurrentDevice().deviceType.other?.hasRecoilControl;a.useEffect(()=>(w(!1),()=>{n.state_鼠标改键.当前选择鼠标功能="组合键"}),[]);const x=[{text:f.组合键,component:e.jsx(Ge,{}),enabled:!0,selected:"组合键"},{text:f.宏设置,component:e.jsx(Ye,{}),enabled:!0,selected:"宏设置"},{text:f.压枪,component:e.jsx(Ie,{}),enabled:j,selected:"压枪"},{text:f.功能,component:e.jsx(Xe,{}),enabled:!0,selected:"功能"},{text:f.其他,component:e.jsx(ve,{}),enabled:!0,selected:"其他"}];return e.jsx(s,{type:"左右",w:"full",h:"full",style:{minHeight:0,overflow:"hidden",justifyContent:"space-between",backgroundColor:"#FFFFFF"},children:e.jsxs(qe,{children:[e.jsx(s,{type:"左右",w:"full",h:"auto",style:{justifyContent:"space-between",alignItems:"center",minHeight:"60px",width:"100%",overflowX:"auto"},children:x.map((l,h)=>l.enabled&&e.jsx(xe,{text:l.text,activeColor:"#3E3E3E",inactiveColor:"#989898",isCurrent:t===h,onClick:()=>{l.enabled&&!u&&(y(h>t?"up":"down"),o(t),r(h),n.state_鼠标改键.当前选择鼠标功能=l.selected)}},h))}),e.jsx(Ve,{children:x[t]?.component})]})})},it=()=>{M();const t=n.getCurrentDevice(),r=t.KB改键设置.当前按键层,i=t.KB改键设置.所有改键信息.find(l=>l.profile===r&&l.sonProfile===0)?.configs??[];let o;const[c,y]=a.useState({mode:"常规",text:void 0});n.state_鼠标改键.当前选择的鼠标按键,a.useEffect(()=>{if(n.state_鼠标改键.当前选择的鼠标按键){o=n.state_鼠标改键.当前选择的鼠标按键;const l=i.find(h=>h.original===o);y($(o,l))}else y({mode:"常规",text:void 0})},[n.state_鼠标改键.当前选择的鼠标按键]);const d=I(),w=[{text:d.自定义按键,component:e.jsx(Je,{}),disabled:!1}];a.useState("right");const[u,f]=a.useState(0),[b,j]=a.useState(!1),x=l=>{n.MsShowSaveToMyWorkDialog=!0,n.layerToShare=l};return a.useEffect(()=>{n.getCurrentDevice().按键修改动作||(n.state_鼠标改键.当前选择的鼠标按键=null)},[n.getCurrentDevice().按键修改动作]),a.useEffect(()=>{},[]),a.useEffect(()=>{j(n.getCurrentDevice().deviceType.id===9998||n.getCurrentDevice().deviceType.id===9997)},[n.getCurrentDevice().deviceType.id]),a.useEffect(()=>{n.getCurrentDevice().按键层切换事件==="none_调用结束"?n.isLoading=!1:n.isLoading=!0},[n.getCurrentDevice().按键层切换事件]),a.useEffect(()=>{n.state_鼠标改键.火力键={选中的按键:null,选中的鼠标按键:null,间隔:50,次数:50}},[n.isLoading,n.getCurrentDevice().恢复默认状态事件]),ye(t.deviceType.mouseLayout),e.jsxs(fe,{children:[e.jsx(s,{type:"上下",h:"full",w:"full",style:{display:"flex",flexDirection:"column",position:"relative"},children:e.jsxs(s,{type:"左右___主轴居中",w:"95%",h:"full",style:{padding:"35px",justifyContent:"space-between",boxSizing:"border-box",minHeight:"627px"},children:[e.jsxs(s,{type:"上下",w:"40%",h:"100%",style:{position:"relative",gap:20,justifyContent:"center"},children:[e.jsx(s,{type:"左右",w:"full",style:{gap:"8px",padding:"8px 16px",justifyContent:"flex-end"},children:e.jsxs(s,{type:"上下",w:"20%",style:{gap:"16px",alignItems:"flex-start",minWidth:90,paddingRight:8},children:[e.jsxs(s,{type:"左右",style:{gap:"8px",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(s,{w:16,h:16,style:{backgroundColor:"#74EBD5",borderRadius:"50%",marginRight:0,marginLeft:0,border:"none",flexShrink:0}}),e.jsx(p,{type:"辅助内容",text:d.已修改,style:{fontSize:16,color:"#222",lineHeight:"16px",fontWeight:400,margin:0,padding:0}})]}),e.jsxs(s,{type:"左右",style:{gap:"8px",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(s,{w:16,h:16,style:{backgroundColor:"#FE4545",borderRadius:"50%",marginRight:0,marginLeft:0,border:"none",flexShrink:0}}),e.jsx(p,{type:"辅助内容",text:d.已禁用,style:{fontSize:16,color:"#222",lineHeight:"16px",fontWeight:400,margin:0,padding:0}})]})]})}),e.jsx(s,{w:"55%",h:"55%",children:e.jsx(ge,{isLight:!0,layout:t.deviceType.mouseLayout,configs:i,value:n.state_鼠标改键.当前选择的鼠标按键,onClick:l=>{n.state_鼠标改键.当前选择的鼠标按键===l.value?n.state_鼠标改键.当前选择的鼠标按键=null:n.state_鼠标改键.当前选择的鼠标按键=l.value}})}),e.jsx(H,{text:d.读取设备配置,onClick:()=>{n.读取设备配置()},disabled:!E.isDeviceConnected,w:160,h:35})]}),e.jsxs(s,{type:"上下",w:"calc(60% - 40px)",h:"100%",style:{alignItems:"center",gap:"10px",padding:"20px",borderRadius:"12px",border:"1px solid #E0E0E0",backgroundColor:"#fff",minHeight:"500px",minWidth:"min-content"},children:[e.jsxs(s,{type:"左右",w:"100%",h:96,style:{alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E5E6EB"},children:[e.jsxs(s,{w:"37%",style:{color:"#1D2129",fontWeight:500,fontSize:"15px",marginRight:"16px",minWidth:"170px",flexShrink:0,display:"flex",alignItems:"center"},children:[e.jsx(pe,{text:d.已选择按键,fontSize:20}),e.jsx("span",{style:{color:"#9AB0E6",fontWeight:500,fontSize:"20px",maxWidth:"200px",whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block"},title:n.state_鼠标改键.当前选择的鼠标按键==null?d.未选择按键||"未选择按键":d[G[n.state_鼠标改键.当前选择的鼠标按键]],children:n.state_鼠标改键.当前选择的鼠标按键==null?d.未选择按键||"未选择按键":d[G[n.state_鼠标改键.当前选择的鼠标按键]]})]}),e.jsxs(s,{type:"左右",h:"full",style:{gap:"6px",flexWrap:"wrap"},children:[e.jsx(s,{w:155,h:35,children:Ze(d,x)}),e.jsx(H,{text:d.重置,onClick:()=>{n.state_鼠标改键.恢复改键()},disabled:n.state_鼠标改键.当前选择的鼠标按键===null,w:120,h:35}),e.jsx(H,{text:d.确定,onClick:()=>{if(n.state_鼠标改键.当前选择的鼠标按键===null)return;const l=n.state_鼠标改键;if(n.改键_组合键列表_全局.length>0&&l.当前选择鼠标功能==="组合键"){l.设置改键("组合键");return}if(n.currentSelectedMacro_键盘设置_宏设置.id!==""&&l.当前选择鼠标功能==="宏设置"){if(n.currentSelectedMacro_键盘设置_宏设置.type==="按下播放"&&(n.state_鼠标改键.当前选择的鼠标按键===g.SCROLLUP||n.state_鼠标改键.当前选择的鼠标按键===g.SCROLLDOWN)){U.error(d.鼠标滚轮向上滚轮向下禁止设置按下播放方式的宏,n.toastOptions);return}l.设置改键("宏设置");return}if(n.改键_选中的特殊按键!=null&&l.当前选择鼠标功能==="功能"){l.设置改键("功能键");return}if(n.改键_选中的鼠标按键!=null&&l.当前选择鼠标功能==="功能"){l.设置改键("鼠标按键");return}if((l.火力键.选中的按键!=null||l.火力键.选中的鼠标按键!=null)&&l.当前选择鼠标功能==="其他"){l.设置改键("火力键");return}if(l.压枪键?.压枪键索引!==void 0&&l.当前选择鼠标功能==="压枪"){const h=t?.鼠标设置?.枪械信息?.[l.压枪键.压枪键索引];if(!(h&&Array.isArray(h.values)?ee(l.压枪键.当前Ui子弹列表,h.values):!1)){window.alert(d.检测到当前枪械未保存请同步或取消修改再设置按键);return}l.设置改键("压枪键");return}he.next({type:"error",message:"请选择需要设置的功能或按键"})},disabled:n.state_鼠标改键.当前选择的鼠标按键===null,w:120,h:35})]})]}),e.jsx(s,{id:"bottom-wrapper-container",type:"上下___交叉轴居左",w:"95%",h:"full",style:{display:"block",minHeight:"540px",overflow:"hidden",marginBottom:"20px"},children:w[u]?.component})]})]})}),n.MsShowSaveToMyWorkDialog&&e.jsx(me,{type:"config",onClose:()=>{n.MsShowSaveToMyWorkDialog=!1},onSave:l=>{n.MsShowSaveToMyWorkDialog=!1,n.handleSaveConfig(l,!1)},visible:n.MsShowSaveToMyWorkDialog})]})},Ze=(t,r)=>{M();const i=n.getCurrentDevice(),o=i.KB改键设置,c=i.deviceType.layer??8,[y,d]=a.useState(!1),[w,u]=a.useState({x:-1,y:-1,key:-1}),[f,b]=a.useState(!1),j=a.useRef(null),x=a.useRef(new Map),l=a.useRef(-1),h=a.useRef(null),R=()=>{const k=l.current;if(k===-1)return;const v=x.current.get(k);if(!v)return;const C=v.parentElement;if(!C)return;const F=C.getBoundingClientRect();h.current&&(h.current.style.left=`${F.left+F.width+10}px`,h.current.style.top=`${F.top}px`),u({x:F.left+F.width+10,y:F.top,key:k})};return a.useEffect(()=>{const k=v=>{j.current&&!j.current.contains(v.target)&&(d(!1),u({x:-1,y:-1,key:-1}),b(!1),l.current=-1)};return document.addEventListener("click",k),()=>{document.removeEventListener("click",k)}},[]),a.useEffect(()=>{if(!f||l.current===-1)return;let k=null,v=!1;const C=()=>{v||(v=!0,k!==null&&cancelAnimationFrame(k),k=requestAnimationFrame(()=>{R(),v=!1}))};R(),window.addEventListener("resize",C),window.addEventListener("scroll",C,!0);const F=new ResizeObserver(()=>{C()});return j.current&&F.observe(j.current),()=>{k!==null&&cancelAnimationFrame(k),window.removeEventListener("resize",C),window.removeEventListener("scroll",C,!0),F.disconnect()}},[f,R]),e.jsxs("div",{ref:j,style:{width:"100%",height:"100%",borderRadius:"12px",padding:"0 8px",appearance:"none",backgroundColor:"rgb(245, 245, 245)",cursor:"pointer",color:"rgb(102, 102, 102)",fontSize:"14px",fontFamily:"var(--font-family-regular)",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",border:"1px solid rgb(204, 204, 204)"},onClick:()=>{d(!y),b(!1)},children:[e.jsx("span",{children:t.板载+(o.当前按键层+1).toString()}),y&&e.jsxs(Qe,{children:[Array.from({length:c},(k,v)=>e.jsxs(et,{onClick:()=>{o.当前按键层=Number(v),d(!1)},children:[t.板载+(v+1),n.isUseIotSDK&&e.jsx(tt,{ref:C=>{C&&x.current.set(v,C)},onClick:C=>{C.stopPropagation(),l.current=v,w.key===v||w.key===-1?b(!f):w.key!==v&&w.key!==-1&&b(!0),requestAnimationFrame(()=>{R()})},children:"‧‧‧"})]},v)),f&&e.jsx("div",{ref:h,style:{position:"fixed",left:w.x,top:w.y,border:"1px solid #CFCFCF",padding:"8px",maxWidth:"64px",overflowWrap:"break-word",borderRadius:"6px",backgroundColor:"white",color:"rgb(51，51，51)",zIndex:3},onClick:()=>{r(w.key)},children:t.保存})]}),e.jsx("span",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none"},children:e.jsx("div",{style:{width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderTop:"4px solid #666666"}})})]})},Qe=S.div({position:"absolute",top:"calc(100% + 4px)",left:"0",width:"100%",backgroundColor:"white",color:"var(--, #3E3E3E)",borderRadius:"12px",border:"1px solid rgb(204, 204, 204)",zIndex:3,boxShadow:"rgba(0, 0, 0, 0.1) 0px 2px 10px",maxHeight:"200px",overflowY:"auto",overflowX:"hidden","::-webkit-scrollbar":{width:7},"::-webkit-scrollbar-track":{background:"transparent",borderRadius:"12px"},"::-webkit-scrollbar-thumb":{background:"#8B8B8B",borderRadius:"12px"}}),et=S.div({},()=>({padding:"5px 0",textAlign:"center",cursor:"pointer",position:"relative","&:hover":{backgroundColor:"#F0F0F0"}})),tt=S.div({},()=>({width:"25px",height:"25px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%",transform:"translateY(-50%)",right:"5px",letterSpacing:"-7px",textIndent:"-6px","&:hover":{backgroundColor:"white",color:"black"}}));export{it as Mouse_改键设置};
