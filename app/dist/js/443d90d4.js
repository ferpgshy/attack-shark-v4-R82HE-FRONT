import{r as b,u as S,G as m,ao as p,d as e,a9 as l,j as y,V as w,aq as x}from"./index.b078bf5f.js";import{u as v}from"./3ce44458.js";const j=_=>b.memo(()=>{S();const d=m();return p({ref:d,onInit:r=>{const t=_(r);e.resetKeyColors(),e.reset_键盘_选中状态();const c=e.keyboardState,s=e.state_lightCustomizationPage.keyboardSvg;e.state_lightCustomizationPage.keyboardSvg=t.root;const o=v.addColorBrushEffects(t);return t.root.classList.add("lightSettingsKeyboardSvg"),{ui:t,cleanupColorBrushEffects:o,previousKeyboardSvg:s,keyboardState:c}},onRefresh:({ui:r})=>{const t=r.status,c=e.keyboardState.keys;v.updateKeyboard(r,s=>{const o=c[s];if(!o)return;let i=o.isHover,n=o.isSelected;const u=(a,h)=>{if(!a)return;const f=e.keyboardState.keys[h].keyColor,g=a.querySelector("rect");g&&f!==void 0&&(g.setAttribute("fill",x(f)),e.keyboardState.keys[h].keyColor=f)};Object.values(t).forEach(a=>{a.id[s]&&(a.id[s].style.display="none")}),!n&&!i?(l.show(t.default?.id[s]),u(t.default?.id[s],s)):!n&&i?(l.show(t.hover?.id[s]),u(t.hover?.id[s],s)):n&&!i?(l.show(t.current?.id[s]),u(t.current?.id[s],s)):n&&i&&(l.show(t.current_hover?.id[s]),u(t.current_hover?.id[s],s))})},onCleanup:({cleanupColorBrushEffects:r,previousKeyboardSvg:t})=>{r&&r(),t!==void 0?e.state_lightCustomizationPage.keyboardSvg=t:e.state_lightCustomizationPage.keyboardSvg=null}}),y.jsx(w,{divRef:d})});export{j as l};
