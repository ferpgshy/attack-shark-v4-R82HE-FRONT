import{u as W,a as z,d as x,r as a,j as d,V as l,e as h,Q as H,y as I,l as R,Y as P,Z as S}from"./index.b078bf5f.js";import{R as J}from"./18d64e70.js";import{C as k}from"./d7c9df92.js";import"./3ce44458.js";const q=()=>{W();const o=z(),i=x.getCurrentDevice(),c=i.deviceType.type==="mouse"?i.deviceType.dpi:void 0;c===void 0?new Array(8):c.count;const[j,F]=a.useState(!1),[D,N]=a.useState(52e3),V=i.deviceType.other?.defaultCurrentDPI??0,v=i.deviceType.other?.defaultDPI,t=i.鼠标设置,[u,_]=a.useState(t.currentDpiIndex),[n,w]=a.useState(t.dpiList),[p,C]=a.useState(n[u]),[T,Y]=a.useState(!1),[y,B]=a.useState(n[u]?.x!==0),[A,b]=a.useState(!1);a.useEffect(()=>{},[]);const K=()=>{try{if(n!==t.dpiList||t.dpiList.length!=(c?c.count:8)){let e=[...t.dpiList];if(e.length>(c?c.count:8))e=e.slice(0,c?c.count:8);else{let r=(c?c.count:8)-t.dpiList.length;for(let s=0;s<(r>=0?r:0);s++)e.push({x:0,y:0,rgb:e[s].rgb})}t.dpiList=e}}catch{}},f=(e,r,s)=>{if(!y){I.error(o.请开启DPI后设置,x.toastOptions);return}t.dpiList=[...t.dpiList.slice(0,u),{x:e,y:r,rgb:s},...t.dpiList.slice(u+1)],C(t.dpiList[u])},O=(e,r=!0)=>{let s=e;return n[s]?n[s].x===0?(s=e+(r?-1:1),n[s]?n[s].x===0?O(s,r):s:(s=r?n.findIndex(m=>m.x!==0):n.findLastIndex(m=>m.x!==0),s)):e:r?n.findIndex(g=>g.x!==0):n.findLastIndex(g=>g.x!==0)};return a.useEffect(()=>{Y(x.getCurrentDevice().deviceType.id===9998||x.getCurrentDevice().deviceType.id===9997)},[x.getCurrentDevice().deviceType.id]),a.useEffect(()=>{i.deviceType&&"dpi"in i.deviceType&&i.deviceType.dpi&&N(i.deviceType.other?.dpiDoubleStartValue?i.deviceType.other?.dpiDoubleStartValue:i.deviceType.dpi.max/2),x.getCurrentDevice().恢复默认状态事件==="start_开始调用"&&b(!1),K(),t.dpiList[t.currentDpiIndex]||(t.currentDpiIndex=t.currentDpiIndex>t.dpiList.length?t.dpiList.findLastIndex(e=>e.x!==0):t.dpiList.findIndex(e=>e.x!==0),w(t.dpiList),_(t.currentDpiIndex),C(t.dpiList[t.currentDpiIndex])),t.dpiList[t.currentDpiIndex]||(t.currentDpiIndex=t.currentDpiIndex>t.dpiList.length?t.dpiList.findLastIndex(e=>e.x!==0):t.dpiList.findIndex(e=>e.x!==0),w(t.dpiList),_(t.currentDpiIndex),C(t.dpiList[t.currentDpiIndex]))},[x.isLoading,x.getCurrentDevice().恢复默认状态事件]),a.useEffect(()=>{C(n[u]),B(n[u]?.x!==0),b(!0)},[u,n]),a.useEffect(()=>{if(A){const e=O(t.currentDpiIndex,u>t.currentDpiIndex);if(e!==t.currentDpiIndex){t.currentDpiIndex=e;return}}n[t.currentDpiIndex]&&(_(t.currentDpiIndex),F(n[t.currentDpiIndex].x==n[t.currentDpiIndex].y),B(n[t.currentDpiIndex]?.x!==0),b(!0))},[t.currentDpiIndex]),a.useEffect(()=>{let e=[...t.dpiList];e.length>(c?c.count:8)&&(e=e.slice(0,c?c.count:8)),w(e)},[t.dpiList.length,JSON.stringify(t.dpiList)]),a.useEffect(()=>{b(!1)},[x.getCurrentDevice().KB改键设置.当前按键层]),d.jsx(l,{type:"上下",w:"full",h:"full",style:{display:"flex",flexDirection:"column",position:"relative"},children:d.jsxs(l,{type:"上下",w:"95%",h:"full",style:{padding:"20px",background:"#FFFFFF",borderRadius:12,overflow:"hidden"},children:[d.jsxs(l,{type:"左右___主轴居中",w:"95%",h:"auto",style:{padding:"15px",backgroundColor:"#3E3E34",position:"relative",borderRadius:12},children:[d.jsx(h,{type:"一级标题栏_高亮",text:o.DPI设置,style:{color:"#F9F9F9"},wrap:!0}),d.jsx(H,{text:o.重置所有DPI,disabled:!1,style:{position:"absolute",right:"20px",top:"50%",transform:"translateY(-50%)"},onClick:()=>{let e=[...n];v!=null&&e.forEach((r,s)=>{r.x=v[s],r.y=v[s]}),e.length>(c?c.count:8)&&(e=e.slice(0,c?c.count:8)),t.dpiList=e,t.currentDpiIndex=V}})]}),d.jsxs(l,{type:"左右",w:"full",h:"full",style:{alignItems:"self-start"},children:[d.jsx(l,{w:"40%",h:"full",type:"上下",style:{padding:"15px 0",borderRight:"1px solid #EBEBEB",gap:28,overflowY:"auto",flex:"1",maxHeight:"70vh"},children:n.length>0&&n.map((e,r)=>d.jsxs(l,{type:"左右",style:{gap:20},children:[d.jsxs(l,{type:"左右",style:{gap:20},onClick:()=>{if(e.x===0){I.error(o.请开启DPI后设置,x.toastOptions);return}t.currentDpiIndex=r},children:[d.jsx(J,{disabled:e.x==0,style:{fontSize:14,fontFamily:"regular",transform:"scale(1.5)"},isSelected:u==r,onClick:()=>{}}),d.jsxs(l,{type:"上下",w:"135px",style:{gap:T?10:6,borderRadius:"12px",background:e.x==0?"#D5D5D5 ":"#F9F9F9",padding:T?"10px":"26px 6px"},children:[!T&&d.jsxs(l,{type:"左右___主轴居中",style:{color:e.x==0?"#989898":"black"},children:["dpi:",e.x]}),T&&d.jsxs(d.Fragment,{children:[d.jsxs(l,{type:"左右___主轴居中",style:{color:e.x==0&&e.y==0?"#989898":"black"},children:["x:",e.x]}),d.jsx(l,{w:"full",style:{border:`1px solid ${e.x==0&&e.y==0?"#989898":"#EBEBEB"}`}}),d.jsxs(l,{type:"左右___主轴居中",style:{color:e.x==0&&e.y==0?"#989898":"black"},children:["y:",e.y]})]})]}),d.jsx("div",{style:{pointerEvents:"none"},onClick:s=>{s.stopPropagation()},children:d.jsx(k,{color:e.rgb,onClick:()=>{},onChange:()=>{}})})]}),d.jsx(R,{value:e.x!=0,onChange:s=>{if(n.filter(g=>g.x!==0).length<=1&&!s){I.error(o.至少需要一个DPI,x.toastOptions);return}if(v){const g=c?.min??50;let M={...n[r],x:s?v[r]===0?g:v[r]:0,y:s?v[r]===0?g:v[r]:0},L=[...n];L[r]=M,s?(b(!1),t.currentDpiIndex=r):r==t.currentDpiIndex&&!s&&(t.currentDpiIndex=L.findIndex(E=>E.x!==0)==-1?0:L.findIndex(E=>E.x!==0)),t.dpiList=L}},disabled:!1})]},r))}),d.jsx(l,{type:"上下",w:"60%",h:"full",style:{padding:"0px 20px",gap:20,flex:"2",opacity:y?1:.5},children:n[u]&&p&&d.jsxs(d.Fragment,{children:[d.jsx(l,{type:"左右",w:"full",style:{marginTop:10},children:d.jsx(h,{wrap:!0,type:"提示文本",text:o.指鼠标移动每英寸点数DPI值鼠标滑动距离相同时DPI越高指针在屏幕移动距离越远})}),d.jsx(l,{type:"左右",w:"full",children:d.jsx(h,{wrap:!0,type:"提示文本",text:o.可通过拖动下方滑块改变DPI值也可以在输入框直接输入想要设置的DPI值})}),d.jsxs(l,{type:"上下",w:"full",h:"full",style:{justifyContent:"center",gap:30},children:[!T&&d.jsxs(l,{type:"左右___主轴居中",style:{position:"relative",gap:30},children:[d.jsx(h,{type:"正文内容",text:o.DPI}),d.jsx(P,{min:(i.deviceType.dpi&&i.deviceType.dpi.min)??50,max:(i.deviceType.dpi&&i.deviceType.dpi.max)??52e3,step:p.x<D?(i.deviceType.dpi&&i.deviceType.dpi.delt)??50:i.deviceType.dpi&&i.deviceType.dpi.delt?i.deviceType.dpi.delt*2:100,value:p.x,onChange:e=>{f(e,e,p.rgb)},disabled:!y,str:p.x.toString()}),d.jsx(S,{style:{width:"70px"},range:{min:(i.deviceType.dpi&&i.deviceType.dpi.min)??50,max:(i.deviceType.dpi&&i.deviceType.dpi.max)??52e3},disabled:!y,value:p.x,step:p.x<D?(i.deviceType.dpi&&i.deviceType.dpi.delt)??50:i.deviceType.dpi&&i.deviceType.dpi.delt?i.deviceType.dpi.delt*2:100,onChange:e=>{f(e,e,p.rgb)}}),d.jsx(l,{style:{position:"absolute",right:5,bottom:-30},children:d.jsx(k,{color:p.rgb,onClick:()=>{y||I.error(o.请开启DPI后设置,x.toastOptions)},onChange:e=>{f(p.x,p.y,e)}})})]}),T&&d.jsxs(d.Fragment,{children:[d.jsxs(l,{type:"左右___主轴居中",style:{position:"relative",gap:30},children:[d.jsx(h,{type:"正文内容",text:o.轴同步}),d.jsx(R,{value:j,onChange:e=>{if(!y){I.error(o.请开启DPI后设置,x.toastOptions);return}F(e),e&&p.x!==p.y&&f(p.x,p.x,p.rgb)},disabled:!y})]}),!j&&d.jsxs(l,{type:"左右___主轴居中",style:{position:"relative",gap:30},children:[d.jsx(h,{type:"正文内容",text:o.X轴}),d.jsx(P,{min:(i.deviceType.dpi&&i.deviceType.dpi.min)??50,max:(i.deviceType.dpi&&i.deviceType.dpi.max)??52e3,step:p.x<D?(i.deviceType.dpi&&i.deviceType.dpi.delt)??50:i.deviceType.dpi&&i.deviceType.dpi.delt?i.deviceType.dpi.delt*2:100,value:p.x,onChange:e=>{f(e,p.y,p.rgb)},disabled:!y,str:p.x.toString()}),d.jsx(S,{style:{width:"70px"},range:{min:(i.deviceType.dpi&&i.deviceType.dpi.min)??50,max:(i.deviceType.dpi&&i.deviceType.dpi.max)??52e3},disabled:!y,value:p.x,step:p.x<D?(i.deviceType.dpi&&i.deviceType.dpi.delt)??50:i.deviceType.dpi&&i.deviceType.dpi.delt?i.deviceType.dpi.delt*2:100,onChange:e=>{f(e,p.y,p.rgb)}})]}),d.jsxs(l,{type:"左右___主轴居中",style:{position:"relative",gap:30},children:[!j&&d.jsx(h,{type:"正文内容",text:o.Y轴}),d.jsx(P,{min:(i.deviceType.dpi&&i.deviceType.dpi.min)??50,max:(i.deviceType.dpi&&i.deviceType.dpi.max)??52e3,step:p.y<D?(i.deviceType.dpi&&i.deviceType.dpi.delt)??50:i.deviceType.dpi&&i.deviceType.dpi.delt?i.deviceType.dpi.delt*2:100,value:p.y,onChange:e=>{f(j?e:p.x,e,p.rgb)},disabled:!y,str:p.y.toString()}),d.jsx(S,{style:{width:"70px"},range:{min:(i.deviceType.dpi&&i.deviceType.dpi.min)??50,max:(i.deviceType.dpi&&i.deviceType.dpi.max)??52e3},disabled:!y,value:p.y,step:p.y<D?(i.deviceType.dpi&&i.deviceType.dpi.delt)??50:i.deviceType.dpi&&i.deviceType.dpi.delt?i.deviceType.dpi.delt*2:100,onChange:e=>{f(j?e:p.x,e,p.rgb)}}),d.jsx(l,{style:{position:"absolute",right:5,bottom:-30},children:d.jsx(k,{color:p.rgb,onClick:()=>{y||I.error(o.请开启DPI后设置,x.toastOptions)},onChange:e=>{f(p.x,p.y,e)}})})]})]})]})]})})]})]})})};export{q as Mouse_DPI设置};
